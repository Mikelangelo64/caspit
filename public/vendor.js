(self.webpackChunkcaspit=self.webpackChunkcaspit||[]).push([[216],{8554:(t,e,s)=>{t=s.nmd(t);var i="__lodash_hash_undefined__",r=9007199254740991,n="[object Arguments]",o="[object AsyncFunction]",a="[object Function]",h="[object GeneratorFunction]",l="[object Null]",c="[object Object]",d="[object Proxy]",u="[object Undefined]",p=/^\[object .+?Constructor\]$/,_=/^(?:0|[1-9]\d*)$/,g={};g["[object Float32Array]"]=g["[object Float64Array]"]=g["[object Int8Array]"]=g["[object Int16Array]"]=g["[object Int32Array]"]=g["[object Uint8Array]"]=g["[object Uint8ClampedArray]"]=g["[object Uint16Array]"]=g["[object Uint32Array]"]=!0,g[n]=g["[object Array]"]=g["[object ArrayBuffer]"]=g["[object Boolean]"]=g["[object DataView]"]=g["[object Date]"]=g["[object Error]"]=g[a]=g["[object Map]"]=g["[object Number]"]=g[c]=g["[object RegExp]"]=g["[object Set]"]=g["[object String]"]=g["[object WeakMap]"]=!1;var f,m,v,b="object"==typeof s.g&&s.g&&s.g.Object===Object&&s.g,w="object"==typeof self&&self&&self.Object===Object&&self,y=b||w||Function("return this")(),x=e&&!e.nodeType&&e,E=x&&t&&!t.nodeType&&t,P=E&&E.exports===x,L=P&&b.process,C=function(){try{return E&&E.require&&E.require("util").types||L&&L.binding&&L.binding("util")}catch(t){}}(),T=C&&C.isTypedArray,k=Array.prototype,O=Function.prototype,S=Object.prototype,M=y["__core-js_shared__"],W=O.toString,I=S.hasOwnProperty,D=(f=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",z=S.toString,A=W.call(Object),j=RegExp("^"+W.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=P?y.Buffer:void 0,F=y.Symbol,H=y.Uint8Array,R=(B&&B.allocUnsafe,m=Object.getPrototypeOf,v=Object,function(t){return m(v(t))}),$=Object.create,N=S.propertyIsEnumerable,V=k.splice,X=F?F.toStringTag:void 0,Q=function(){try{var t=ut(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),U=B?B.isBuffer:void 0,Y=Math.max,q=Date.now,K=ut(y,"Map"),J=ut(Object,"create"),G=function(){function t(){}return function(e){if(!Pt(e))return{};if($)return $(e);t.prototype=e;var s=new t;return t.prototype=void 0,s}}();function Z(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var i=t[e];this.set(i[0],i[1])}}function tt(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var i=t[e];this.set(i[0],i[1])}}function et(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var i=t[e];this.set(i[0],i[1])}}function st(t){var e=this.__data__=new tt(t);this.size=e.size}function it(t,e,s){(void 0!==s&&!mt(t[e],s)||void 0===s&&!(e in t))&&ot(t,e,s)}function rt(t,e,s){var i=t[e];I.call(t,e)&&mt(i,s)&&(void 0!==s||e in t)||ot(t,e,s)}function nt(t,e){for(var s=t.length;s--;)if(mt(t[s][0],e))return s;return-1}function ot(t,e,s){"__proto__"==e&&Q?Q(t,e,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[e]=s}Z.prototype.clear=function(){this.__data__=J?J(null):{},this.size=0},Z.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Z.prototype.get=function(t){var e=this.__data__;if(J){var s=e[t];return s===i?void 0:s}return I.call(e,t)?e[t]:void 0},Z.prototype.has=function(t){var e=this.__data__;return J?void 0!==e[t]:I.call(e,t)},Z.prototype.set=function(t,e){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=J&&void 0===e?i:e,this},tt.prototype.clear=function(){this.__data__=[],this.size=0},tt.prototype.delete=function(t){var e=this.__data__,s=nt(e,t);return!(s<0||(s==e.length-1?e.pop():V.call(e,s,1),--this.size,0))},tt.prototype.get=function(t){var e=this.__data__,s=nt(e,t);return s<0?void 0:e[s][1]},tt.prototype.has=function(t){return nt(this.__data__,t)>-1},tt.prototype.set=function(t,e){var s=this.__data__,i=nt(s,t);return i<0?(++this.size,s.push([t,e])):s[i][1]=e,this},et.prototype.clear=function(){this.size=0,this.__data__={hash:new Z,map:new(K||tt),string:new Z}},et.prototype.delete=function(t){var e=dt(this,t).delete(t);return this.size-=e?1:0,e},et.prototype.get=function(t){return dt(this,t).get(t)},et.prototype.has=function(t){return dt(this,t).has(t)},et.prototype.set=function(t,e){var s=dt(this,t),i=s.size;return s.set(t,e),this.size+=s.size==i?0:1,this},st.prototype.clear=function(){this.__data__=new tt,this.size=0},st.prototype.delete=function(t){var e=this.__data__,s=e.delete(t);return this.size=e.size,s},st.prototype.get=function(t){return this.__data__.get(t)},st.prototype.has=function(t){return this.__data__.has(t)},st.prototype.set=function(t,e){var s=this.__data__;if(s instanceof tt){var i=s.__data__;if(!K||i.length<199)return i.push([t,e]),this.size=++s.size,this;s=this.__data__=new et(i)}return s.set(t,e),this.size=s.size,this};function at(t){return null==t?void 0===t?u:l:X&&X in Object(t)?function(t){var e=I.call(t,X),s=t[X];try{t[X]=void 0;var i=!0}catch(t){}var r=z.call(t);return i&&(e?t[X]=s:delete t[X]),r}(t):function(t){return z.call(t)}(t)}function ht(t){return Lt(t)&&at(t)==n}function lt(t,e,s,i,r){t!==e&&function(t,e,s){for(var i=-1,r=Object(t),n=s(t),o=n.length;o--;){var a=n[++i];if(!1===e(r[a],a,r))break}}(e,(function(n,o){if(r||(r=new st),Pt(n))!function(t,e,s,i,r,n,o){var a=gt(t,s),h=gt(e,s),l=o.get(h);if(l)it(t,s,l);else{var d,u,p,_,g,f=n?n(a,h,s+"",t,e,o):void 0,m=void 0===f;if(m){var v=bt(h),b=!v&&yt(h),w=!v&&!b&&Ct(h);f=h,v||b||w?bt(a)?f=a:Lt(g=a)&&wt(g)?f=function(t,e){var s=-1,i=t.length;for(e||(e=Array(i));++s<i;)e[s]=t[s];return e}(a):b?(m=!1,f=function(t,e){return t.slice()}(h)):w?(m=!1,_=new(p=(d=h).buffer).constructor(p.byteLength),new H(_).set(new H(p)),u=_,f=new d.constructor(u,d.byteOffset,d.length)):f=[]:function(t){if(!Lt(t)||at(t)!=c)return!1;var e=R(t);if(null===e)return!0;var s=I.call(e,"constructor")&&e.constructor;return"function"==typeof s&&s instanceof s&&W.call(s)==A}(h)||vt(h)?(f=a,vt(a)?f=function(t){return function(t,e,s,i){var r=!s;s||(s={});for(var n=-1,o=e.length;++n<o;){var a=e[n],h=void 0;void 0===h&&(h=t[a]),r?ot(s,a,h):rt(s,a,h)}return s}(t,Tt(t))}(a):Pt(a)&&!xt(a)||(f=function(t){return"function"!=typeof t.constructor||_t(t)?{}:G(R(t))}(h))):m=!1}m&&(o.set(h,f),r(f,h,i,n,o),o.delete(h)),it(t,s,f)}}(t,e,o,s,lt,i,r);else{var a=i?i(gt(t,o),n,o+"",t,e,r):void 0;void 0===a&&(a=n),it(t,o,a)}}),Tt)}var ct=Q?function(t,e){return Q(t,"toString",{configurable:!0,enumerable:!1,value:(s=e,function(){return s}),writable:!0});var s}:St;function dt(t,e){var s,i,r=t.__data__;return("string"==(i=typeof(s=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==s:null===s)?r["string"==typeof e?"string":"hash"]:r.map}function ut(t,e){var s=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Pt(t)||function(t){return!!D&&D in t}(t))&&(xt(t)?j:p).test(function(t){if(null!=t){try{return W.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(s)?s:void 0}function pt(t,e){var s=typeof t;return!!(e=null==e?r:e)&&("number"==s||"symbol"!=s&&_.test(t))&&t>-1&&t%1==0&&t<e}function _t(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||S)}function gt(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ft=function(t){var e=0,s=0;return function(){var i=q(),r=16-(i-s);if(s=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(ct);function mt(t,e){return t===e||t!=t&&e!=e}var vt=ht(function(){return arguments}())?ht:function(t){return Lt(t)&&I.call(t,"callee")&&!N.call(t,"callee")},bt=Array.isArray;function wt(t){return null!=t&&Et(t.length)&&!xt(t)}var yt=U||function(){return!1};function xt(t){if(!Pt(t))return!1;var e=at(t);return e==a||e==h||e==o||e==d}function Et(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}function Pt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Lt(t){return null!=t&&"object"==typeof t}var Ct=T?function(t){return function(e){return t(e)}}(T):function(t){return Lt(t)&&Et(t.length)&&!!g[at(t)]};function Tt(t){return wt(t)?function(t,e){var s=bt(t),i=!s&&vt(t),r=!s&&!i&&yt(t),n=!s&&!i&&!r&&Ct(t),o=s||i||r||n,a=o?function(t,e){for(var s=-1,i=Array(t);++s<t;)i[s]=e(s);return i}(t.length,String):[],h=a.length;for(var l in t)!e&&!I.call(t,l)||o&&("length"==l||r&&("offset"==l||"parent"==l)||n&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||pt(l,h))||a.push(l);return a}(t,!0):function(t){if(!Pt(t))return function(t){var e=[];if(null!=t)for(var s in Object(t))e.push(s);return e}(t);var e=_t(t),s=[];for(var i in t)("constructor"!=i||!e&&I.call(t,i))&&s.push(i);return s}(t)}var kt,Ot=(kt=function(t,e,s,i){lt(t,e,s,i)},function(t,e){return ft(function(t,e,s){return e=Y(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,n=Y(i.length-e,0),o=Array(n);++r<n;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=s(o),function(t,e,s){switch(s.length){case 0:return t.call(e);case 1:return t.call(e,s[0]);case 2:return t.call(e,s[0],s[1]);case 3:return t.call(e,s[0],s[1],s[2])}return t.apply(e,s)}(t,this,a)}}(t,e,St),t+"")}((function(t,e){var s=-1,i=e.length,r=i>1?e[i-1]:void 0,n=i>2?e[2]:void 0;for(r=kt.length>3&&"function"==typeof r?(i--,r):void 0,n&&function(t,e,s){if(!Pt(s))return!1;var i=typeof e;return!!("number"==i?wt(s)&&pt(e,s.length):"string"==i&&e in s)&&mt(s[e],t)}(e[0],e[1],n)&&(r=i<3?void 0:r,i=1),t=Object(t);++s<i;){var o=e[s];o&&kt(t,o,s,r)}return t})));function St(t){return t}t.exports=Ot},2796:(t,e,s)=>{t.exports=s(643)},3264:t=>{"use strict";var e=!("undefined"==typeof window||!window.document||!window.document.createElement),s={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen,isInWorker:!e};t.exports=s},4518:t=>{var e,s,i,r,n,o,a,h,l,c,d,u,p,_,g,f=!1;function m(){if(!f){f=!0;var t=navigator.userAgent,m=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),v=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(u=/\b(iPhone|iP[ao]d)/.exec(t),p=/\b(iP[ao]d)/.exec(t),c=/Android/i.exec(t),_=/FBAN\/\w+;/i.exec(t),g=/Mobile/i.exec(t),d=!!/Win64/.exec(t),m){(e=m[1]?parseFloat(m[1]):m[5]?parseFloat(m[5]):NaN)&&document&&document.documentMode&&(e=document.documentMode);var b=/(?:Trident\/(\d+.\d+))/.exec(t);o=b?parseFloat(b[1])+4:e,s=m[2]?parseFloat(m[2]):NaN,i=m[3]?parseFloat(m[3]):NaN,(r=m[4]?parseFloat(m[4]):NaN)?(m=/(?:Chrome\/(\d+\.\d+))/.exec(t),n=m&&m[1]?parseFloat(m[1]):NaN):n=NaN}else e=s=i=n=r=NaN;if(v){if(v[1]){var w=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);a=!w||parseFloat(w[1].replace("_","."))}else a=!1;h=!!v[2],l=!!v[3]}else a=h=l=!1}}var v={ie:function(){return m()||e},ieCompatibilityMode:function(){return m()||o>e},ie64:function(){return v.ie()&&d},firefox:function(){return m()||s},opera:function(){return m()||i},webkit:function(){return m()||r},safari:function(){return v.webkit()},chrome:function(){return m()||n},windows:function(){return m()||h},osx:function(){return m()||a},linux:function(){return m()||l},iphone:function(){return m()||u},mobile:function(){return m()||u||p||c||g},nativeApp:function(){return m()||_},android:function(){return m()||c},ipad:function(){return m()||p}};t.exports=v},6534:(t,e,s)=>{"use strict";var i,r=s(3264);r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=function(t,e){if(!r.canUseDOM||e&&!("addEventListener"in document))return!1;var s="on"+t,n=s in document;if(!n){var o=document.createElement("div");o.setAttribute(s,"return;"),n="function"==typeof o[s]}return!n&&i&&"wheel"===t&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}},643:(t,e,s)=>{"use strict";var i=s(4518),r=s(6534);function n(t){var e=0,s=0,i=0,r=0;return"detail"in t&&(s=t.detail),"wheelDelta"in t&&(s=-t.wheelDelta/120),"wheelDeltaY"in t&&(s=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=s,s=0),i=10*e,r=10*s,"deltaY"in t&&(r=t.deltaY),"deltaX"in t&&(i=t.deltaX),(i||r)&&t.deltaMode&&(1==t.deltaMode?(i*=40,r*=40):(i*=800,r*=800)),i&&!e&&(e=i<1?-1:1),r&&!s&&(s=r<1?-1:1),{spinX:e,spinY:s,pixelX:i,pixelY:r}}n.getEventType=function(){return i.firefox()?"DOMMouseScroll":r("wheel")?"wheel":"mousewheel"},t.exports=n},5669:(t,e,s)=>{"use strict";s.r(e),s.d(e,{AnimationFrame:()=>M,Application:()=>Ft,Callbacks:()=>C,Component:()=>O,Ctx2D:()=>Yt,Ctx2DPrerender:()=>Kt,CustomCursor:()=>he,Dragger:()=>Xt,DraggerDirection:()=>Ut,DraggerMove:()=>Qt,GeneralTypes:()=>h,Module:()=>k,MutableProp:()=>T,Page:()=>Nt,PageLoad:()=>Bt,Plugin:()=>Ht,Preloader:()=>Rt,ProgressPreloader:()=>$t,ScrollBar:()=>Gt,ScrollEventsBase:()=>Zt,ScrollSectionProgress:()=>oe,ScrollView:()=>te,SmoothScroll:()=>I,SmoothScrollDragPlugin:()=>ne,SmoothScrollKeyboardPlugin:()=>ie,SplitText:()=>ae,StaticTimeline:()=>G,Timeline:()=>Z,Viewport:()=>jt,WheelHandler:()=>Vt,utils:()=>le});var i={};s.r(i),s.d(i,{id:()=>c,mergeWithoutArrays:()=>p,timeoutCallback:()=>_});var r={};s.r(r),s.d(r,{intersectionObserverSupported:()=>A,onScroll:()=>z});var n={};s.r(n),s.d(n,{clamp:()=>S,clampScope:()=>H,easing:()=>K,inScope:()=>F,lerp:()=>W,scoped:()=>j,spreadScope:()=>B,wrap:()=>R});var o={};s.r(o),s.d(o,{getValues:()=>J,to:()=>tt,toElement:()=>et});var a={};s.r(a),s.d(a,{load:()=>nt,pathsToProps:()=>at,sizesToSrcSet:()=>ot});var h={};s.r(h);let l=0;function c(t="id"){return l+=1,`${t}_${l}`}var d=s(8554),u=s.n(d);function p(t,e){return u()(t,e,((t,e)=>{if(Array.isArray(t))return e}))}function _(t,e){let s;return 0===e?t():s=setTimeout((()=>{t()}),e),{clear:()=>{s&&clearTimeout(s)}}}function g(t){return t instanceof HTMLElement||t instanceof Element}function f(t){return t instanceof Window}function m(t,e){if(f(t))return t;if(g(t))return t;if(void 0!==e){const s=m(e);if(s)return s.querySelector(t)}return document.querySelector(t)}const v=[];function b(t,e,s,i){if(void 0!==i){const r={passive:!1,once:!1};i.once&&(r.once=!0),i.passive&&(r.passive=!0),t.addEventListener(e,s,r)}else t.addEventListener(e,s);const r=`${Math.random()}-${+new Date}`;return v.push({id:r,el:t,target:e,callback:s}),{id:r,remove:w.bind(this,r)}}function w(t){const e=[];for(let s=0,i=v.length;s<i;s++){const i=v[s];i.id===t?i.el.removeEventListener(i.target,i.callback):e.push(i)}}function y(t,e,s){const i=e.split(" ");for(let e=0;e<i.length;e++)void 0===s?t.classList.toggle(i[e]):s?t.classList.add(i[e]):t.classList.remove(i[e])}function x(t,e={}){const s=document.createElement(t);if(e.class&&function(t,e){if(t instanceof Element)y(t,e,!0);else for(let s=0;s<t.length;s++)y(t[s],e,!0)}(s,e.class),e.id&&s.setAttribute("id",e.id),e.attr)for(let t=0,i=e.attr.length;t<i;t++){const i=e.attr[t];s.setAttribute(i[0],i[1])}if(e.parent&&e.parent.appendChild(s),e.html&&(s.innerHTML=e.html),e.children)for(let t=0,i=e.children.length;t<i;t++)s.appendChild(e.children[t]);return s}function E(t,e){if(t instanceof NodeList)return t;if(g(t))return[t];if(Array.isArray(t))return t;if(void 0!==e){const s=m(e);if(s)return s.querySelectorAll(t)}return document.querySelectorAll(t)}var P=s(2796),L=s.n(P);class C{constructor(t=!0){this._app=window.vevetApp,this._callbacks=[],t&&this._init()}get callbacks(){return this._callbacks}_init(){this._constructor(),this._setEvents()}_constructor(){}_setEvents(){}add(t,e,s={}){const i=c("callback"),r={id:i,on:!0,data:Object.assign({target:t,do:e},s)};return this._callbacks.push(r),this._onAdd(i),{id:i,remove:this.remove.bind(this,i)}}_onAdd(t){}remove(t,e=!1){let s=!1;const i=this._callbacks.filter((i=>{if(i.id!==t)return!0;const{data:r}=i;return!(!r.protected||e)||(this._onRemove(t),s=!0,!1)}));return this._callbacks=i,s}_onRemove(t){}removeAll(t=!1){for(;this._callbacks.length>0;)this.remove(this._callbacks[0].id,t)}turn(t,e=!0){const s=this.get(t);return!!s&&(s.on=e,this._onTurn(t),!0)}_onTurn(t){}get(t){const e=this._callbacks.filter((e=>e.id===t));return e.length>0&&e[0]}_trigger(t,e){if(!t.on)return;const{timeout:s,once:i}=t.data,r=t.data.do;s?_(e?this._triggerFunc.bind(this,r,e):this._triggerFunc.bind(this,r,!1),s):e?this._triggerFunc(r,e):this._triggerFunc(r,!1),i&&this.remove(t.id)}_triggerFunc(t,e){e?t(e):t()}tbt(t,e){this._callbacks.forEach((s=>{s.data.target===t&&this._trigger(s,e)}))}destroy(){this.removeAll(!0)}}class T{constructor(t,e=(()=>{}),s=(()=>{}),i="Responsive Prop"){this._initProp=t,this._onResponsive=e,this._onChange=s,this._name=i,this._responsiveRules=[],this._app=window.vevetApp,this._refProp=p({},t),this._prop=p({},t)}get prop(){return this._prop}addResponsiveProp(t){this._responsiveRules.push(t),void 0===this._viewportCallback&&(this._viewportCallback=this._app.viewport.add("w",this._responseProp.bind(this,!0),{name:this._name})),this._responseProp()}_responseProp(t=!1){const e=this._responsiveRules,s=this._app,{viewport:i}=s,{width:r}=i;let n=!1;const o=p({},this._refProp);e.forEach((t=>{const{settings:e,breakpoint:a}=t;if("number"==typeof a)r<=t.breakpoint&&(n=p(o,e));else if("string"==typeof a){const t=a.toLowerCase();("d"===t&&i.isDesktop||"t"===t&&i.isTablet||"p"===t&&i.isPhone)&&(n=p(o,e)),("phone"===t&&s.isPhone||"tablet"===t&&s.isTablet||"mobile"===t&&s.isMobile)&&(n=p(o,e))}})),this._prop=p(this._prop,n||this._refProp),t&&this._onResponsive()}changeProp(t){this._prop=p(this._prop,t),this._refProp=p(this._refProp,t),this._onChange(t)}destroy(){this._viewportCallback&&this._viewportCallback.remove()}}class k{constructor(t,e=!0){this._inited=!1,this._viewportCallbacks=[],window.vevetApp?this._app=window.vevetApp:function(){throw new Error('Vevet.Application does not exist yet. \nCall "new Vevet.Application()" before using all the stuff')}(),this._destroyed=!1,this._listeners=[],this._callbacks=new C;const s=p(this._getDefaultProp(),t||{});this._mutableProp=new T(s,this._onPropResponsive.bind(this),this._onPropChange.bind(this),this.name),e&&this.init()}_getDefaultProp(){return{parent:!1}}get prop(){return this._mutableProp.prop}get callbacks(){return this._callbacks}get prefix(){return""}get name(){return this.constructor.name}get inited(){return this._inited}get destroyed(){return this._destroyed}addResponsiveProp(t){if(this._inited)throw new Error("Responsive properties cannot be added because the class instance is already initialized");this._mutableProp.addResponsiveProp(t)}changeProp(t={}){this._mutableProp.changeProp(t),this._callbacks.tbt("changeProp",!1)}_onPropResponsive(){this._onPropMutate()}_onPropChange(t){this._onPropMutate()}_onPropMutate(){}init(){this._inited||(this._inited=!0,this._constructor(),this._setEvents(),this.prop.parent&&this.prop.parent.addCallback("destroy",(()=>{this.destroy()})))}_constructor(){}_setEvents(){}addViewportCallback(t,e,s={}){const i=this._app.viewport.add(t,e,Object.assign(Object.assign({},s),{name:this.constructor.name}));return this._viewportCallbacks.push(i),i}addCallback(t,e,s={}){return this.callbacks.add(t,e,s)}addEventListeners(t,e,s,i){const r=b(t,e,s,i);return this._listeners.push(r),r}destroy(){this.destroyed||this._destroy()}_destroy(){this._callbacks.tbt("destroy",!1),this._callbacks.destroy(),this._mutableProp.destroy(),this._viewportCallbacks.forEach((t=>{t.remove()})),this._listeners.forEach((t=>{t.remove()})),this._destroyed=!0}}class O extends k{addPlugin(t){void 0===this._plugins&&(this._plugins=[]),this._plugins.push(t),t.inited||t.initPlugin(this)}_destroyPlugins(){this._plugins&&this._plugins.forEach((t=>{t.destroy()}))}_destroy(){super._destroy(),this._destroyPlugins()}}function S(t,e=[0,1]){return t<e[0]?e[0]:t>e[1]?e[1]:t}class M extends O{constructor(t,e=!0){super(t,!1),this._isPlaying=!1,this._frame=null,this._frameIndex=-1,this._timeStamp=null,this._prevFrameTime=null,e&&this.init()}get isPlaying(){return this._isPlaying}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{fps:140,run:!1})}_constructor(){super._constructor(),this._create()}_create(){this.prop.run&&this.play()}_onPropMutate(){this._frameIndex=-1,this._timeStamp=null,this._prevFrameTime=null,this.prop.run?this._play():this._pause()}play(){this.destroyed||this.prop.run||this.changeProp({run:!0})}_play(){this.isPlaying||(this._isPlaying=!0,this._frame=window.requestAnimationFrame(this._animate.bind(this)))}pause(){this.prop.run&&this.changeProp({run:!1})}_pause(){this.isPlaying&&(this._frame&&(window.cancelAnimationFrame(this._frame),this._frame=null),this._isPlaying=!1)}_animate(t){if(!this._isPlaying)return;this._frame=window.requestAnimationFrame(this._animate.bind(this));const e=+new Date;null==this._timeStamp&&(this._timeStamp=t),null==this._prevFrameTime&&(this._prevFrameTime=e);const s=Math.floor((t-this._timeStamp)/(1e3/this.prop.fps));if(s<=this._frameIndex)return;this._frameIndex=s;const i=e-this._prevFrameTime,r=S(0===i?1e3/60:Math.floor(1e3/i),[1,1/0]);this.callbacks.tbt("frame",{fps:this.prop.fps,realFPS:r,prevFrameDuration:e-this._prevFrameTime}),this._prevFrameTime=+new Date}_destroy(){this.pause(),super._destroy()}}function W(t,e,s,i=.001){const r=t*(1-s)+e*s;return Math.abs(e-r)<=i?e:r}class I extends O{constructor(t,e=!0){super(t,!1);const{selectors:s}=this.prop;if(this._targetLeft=0,this._targetTop=0,this._scrollLeft=0,this._scrollTop=0,this._scrollWidth=0,this._scrollHeight=0,this._clientWidth=0,this._clientHeight=0,this._instant=!1,this._animationFrame=void 0,this._outerAnimationFrameEvent=void 0,this._currentFPS=60,this._outer=m(s.outer),!(this._outer instanceof HTMLElement))throw new Error(`${s.outer} is not a HTMLElement`);this._outer.classList.add(this.prefix);const i=m(`.${this.prefix}__container`,this.outer);g(i)?(this._container=i,this._containerExists=!0):(this._container=x("div",{class:`${this.prefix}__container`,parent:this.outer,children:Array.from(this.outer.children)}),this._containerExists=!1),s.elements?this._elements=Array.from(E(s.elements,this._outer)):this._elements=[this._container],this._elementsLength=this._elements.length,this.prop.useWillChange&&this._elements.forEach((t=>{t.style.willChange="transform"})),e&&this.init()}get prefix(){return`${this._app.prefix}smooth-scroll`}get outer(){return this._outer}get container(){return this._container}get elements(){return this._elements}get targetLeft(){return this._targetLeft}set targetLeft(t){this.targetLeftBound=t,this._enable()}set targetLeftBound(t){const e=this.prop.overscroll&&this.prop.isHorizontal?-this.prop.overscroll.max:0,s=this.maxScrollableWidth+(this.prop.overscroll&&this.prop.isHorizontal?this.prop.overscroll.max:0);this._targetLeft=S(t,[e,s])}get targetLeftBound(){return this._targetLeft}get targetTop(){return this._targetTop}set targetTop(t){this.targetTopBound=t,this._enable()}set targetTopBound(t){const e=this.prop.overscroll&&!this.prop.isHorizontal?-this.prop.overscroll.max:0,s=this.maxScrollableHeight+(this.prop.overscroll&&!this.prop.isHorizontal?this.prop.overscroll.max:0);this._targetTop=S(t,[e,s])}get targetTopBound(){return this._targetTop}get scrollLeft(){return this._scrollLeft}set scrollLeft(t){this.targetLeftBound=t,this._scrollLeft=this._targetLeft,this._enable()}get scrollTop(){return this._scrollTop}set scrollTop(t){this.targetTopBound=t,this._scrollTop=this._targetTop,this._enable()}get scrollWidth(){return this._scrollWidth}get scrollHeight(){return this._scrollHeight}get clientWidth(){return this._clientWidth}get clientHeight(){return this._clientHeight}get maxScrollableWidth(){return this.scrollWidth-this.clientWidth}get maxScrollableHeight(){return this.scrollHeight-this.clientHeight}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{selectors:{outer:`#${this.prefix}`,elements:!1},enabled:!0,animationFrame:!1,recalculateSizes:!0,resizeTimeout:0,useWheel:!0,autoStop:!0,isHorizontal:!1,stopPropagation:!0,useWillChange:!0,render:{lerp:.1,lerpToFixed:2,approximation:.1,normalizeLerp:!1},overscroll:{friction:.5,max:250}})}_constructor(){super._constructor(),this._toggle()}_setEvents(){this.resize(),this.addViewportCallback("",(()=>{this.resize(!0)}),{timeout:this.prop.resizeTimeout}),this.addEventListeners(this.outer,"wheel",(t=>{this._handleWheel(t)})),this.addEventListeners(this.outer,"scroll",(()=>{this.outer.scrollTop=0,this.outer.scrollLeft=0}))}_onPropMutate(){super._onPropMutate(),this.resize(),this._toggle()}resize(t=!1){const{container:e,outer:s}=this;this._clientWidth=s.clientWidth,this._clientHeight=s.clientHeight,this._scrollWidth=S(e.clientWidth,[this.clientWidth,1/0]),this._scrollHeight=S(e.clientHeight,[this.clientHeight,1/0]),t&&(this._instant=!0),t&&(this.targetLeft=parseInt(this.targetLeft.toFixed(0),10),this.targetTop=parseInt(this.targetTop.toFixed(0),10));const i=this.maxScrollableHeight>0||this.maxScrollableWidth>0;s.classList.toggle("has-scroll",i),s.classList.toggle("no-scroll",!i),this._updateElementsProp(),this.callbacks.tbt("resize",!1)}_recalculateSizes(){const{container:t}=this,e=t.clientHeight,s=t.clientWidth;e===this.scrollHeight&&s===this.scrollWidth||this.resize()}_updateElementsProp(){for(let t=0;t<this._elementsLength;t+=1){const e=this._elements[t];e.smoothScrollLeft=this.scrollLeft,e.smoothScrollTop=this.scrollTop;const s=e.getAttribute(`${this.prefix}-ease`);if(s)try{e.smoothScrollLerpEase=parseFloat(s)}catch(t){}}}_handleWheel(t){const{prop:e}=this;if(!e.enabled||!e.useWheel)return;(e.stopPropagation||!e.stopPropagation&&(this.scrollLeft>0&&this.scrollLeft<this.maxScrollableWidth||this.scrollTop>0&&this.scrollTop<this.maxScrollableHeight))&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault());const s=L()(t);this.targetLeftBound+=e.isHorizontal?s.pixelY:s.pixelX,this.targetTopBound+=e.isHorizontal?s.pixelX:s.pixelY,this._enable(),this.callbacks.tbt("wheel",t)}_toggle(){this.prop.enabled?this._enable():this._disable()}_enable(){this.prop.enabled&&(this.prop.animationFrame&&!this._outerAnimationFrameEvent?this._outerAnimationFrameEvent=this.prop.animationFrame.addCallback("frame",(t=>{this._currentFPS=t.realFPS,this.render()})):(this._animationFrame||(this._animationFrame=new M,this._animationFrame.addCallback("frame",(t=>{this._currentFPS=t.realFPS,this.render()}))),this._animationFrame.play()))}_disable(){this._outerAnimationFrameEvent&&this.prop.animationFrame&&this._outerAnimationFrameEvent.remove(),this._animationFrame&&this._animationFrame.pause()}render(){const{prop:t}=this;t.recalculateSizes&&this._recalculateSizes(),this._calcScroll(),this._calcElements(),this._renderElements(),this._instant&&(this._instant=!1),this.callbacks.tbt("scroll",!1);const e=Math.abs(this.targetTop-this.scrollTop);0===Math.abs(this.targetLeft-this.scrollLeft)&&0===e&&t.autoStop&&(this._disable(),this.callbacks.tbt("approximate",!1))}_calcScroll(){const{overscroll:t}=this.prop;t&&(this.targetLeft<0?this.targetLeftBound=this._lerp(this.targetLeftBound,0,t.friction):this.targetLeft>this.maxScrollableWidth&&(this.targetLeftBound=this._lerp(this.targetLeftBound,this.maxScrollableWidth,t.friction)),this.targetTop<0?this.targetTopBound=this._lerp(this.targetTopBound,0,t.friction):this.targetTop>this.maxScrollableHeight&&(this.targetTopBound=this._lerp(this.targetTopBound,this.maxScrollableHeight,t.friction))),this._scrollLeft=this._lerp(this.scrollLeft,this.targetLeft),this._scrollTop=this._lerp(this.scrollTop,this.targetTop)}_calcElements(){const t=this._getLerpEase();for(let e=0;e<this._elementsLength;e+=1){const s=this._elements[e],i=this._getLerpEase(s);i===t?(s.smoothScrollLeft=this._scrollLeft,s.smoothScrollTop=this._scrollTop):(s.smoothScrollLeft=this._lerp(s.smoothScrollLeft,this._targetLeft,i),s.smoothScrollTop=this._lerp(s.smoothScrollTop,this._targetTop,i))}}_lerp(t,e,s=this._getLerpEase()){const{lerpToFixed:i,approximation:r}=this.prop.render,n=W(t,e,this._instant?1:s,r);if("number"==typeof i){const t=Math.round(Math.abs(i));return parseFloat(n.toFixed(t))}return n}_getLerpEase(t=!1){const{lerp:e,normalizeLerp:s}=this.prop.render,i=s?60/this._currentFPS:1;return t&&t.smoothScrollLerpEase||e*i}_renderElements(){for(let t=0;t<this._elementsLength;t+=1){const e=this._elements[t],s=-e.smoothScrollLeft,i=-e.smoothScrollTop;e.style.transform=`matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0, ${s}, ${i}, 0,1)`}}scrollTo(){const t=arguments;if(1===t.length&&"object"==typeof t[0]){const e=t[0],{top:s,left:i,behavior:r}=e;void 0!==i&&("smooth"===r?this.targetLeftBound=i:this.scrollLeft=i),void 0!==s&&("smooth"===r?this.targetTopBound=s:this.scrollTop=s),"smooth"===r&&this._enable()}"number"!=typeof t[0]&&"number"!=typeof t[1]||("number"==typeof t[0]&&(this.scrollLeft=t[0]),"number"==typeof t[1]&&(this.scrollTop=t[1]))}_destroy(){if(super._destroy(),this._disable(),this._animationFrame&&this._animationFrame.destroy(),!this._containerExists){for(;this._container.firstChild;)this._outer.appendChild(this._container.firstChild);this._container.remove()}this._outer.classList.remove(this.prefix),this._elements.forEach((t=>{t.style.transform="",t.style.willChange=""}))}}let D=[];function z({container:t,callback:e,isPassive:s=!1}){let i=D.find((e=>e.container===t&&e.isPassive===s));const r=c("scroll-event");if(i)i.callbacks.push({id:r,callback:e});else{i={id:c("scroll-event-instance"),container:t,callbacks:[{id:r,callback:e}],isPassive:s,listeners:[]},D.push(i);const{listeners:n}=i;if(t instanceof I)n.push(t.addCallback("scroll",(()=>{const{scrollTop:e,scrollLeft:s}=t;for(let t=0;t<i.callbacks.length;t+=1)i.callbacks[t].callback({scrollTop:e,scrollLeft:s})})));else{const e=t instanceof Window,r=m(t);n.push(b(r,"scroll",(()=>{const t=e?r.pageYOffset:r.scrollTop,s=e?r.pageXOffset:r.scrollLeft;for(let e=0;e<i.callbacks.length;e+=1)i.callbacks[e].callback({scrollTop:t,scrollLeft:s})}),{passive:s}))}}return{remove:()=>{const t=i.callbacks.filter((t=>t.id!==r));i.callbacks=t,0===t.length&&(i.listeners.forEach((t=>{t.remove()})),D=D.filter((t=>t.id!==i.id)))}}}function A(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype}function j(t,e=[0,1]){return(t-e[0])/(e[1]-e[0])}function B(t,e){const s=[],i=1/(t-e*(t-1));for(let r=0;r<t;r+=1){const t=i*(1-e)*r,n=t+i;s.push([t,n])}return s}function F(t,e=[0,1]){return t>=e[0]&&t<=e[1]}function H(t,e=[0,1],s=[0,1]){return S(j(t,e),s)}function R(t,e,s){const i=e-t;return function(t,e){return t||0===t?e(t):e}(s,(e=>(i+(e-t)%i)%i+t))}function $(t,e,s){return((N(e,s)*t+V(e,s))*t+X(e))*t}function N(t,e){return 1-3*e+3*t}function V(t,e){return 3*e-6*t}function X(t){return 3*t}function Q(t,e,s){return 3*N(e,s)*t*t+2*V(e,s)*t+X(e)}var U;function Y(t){const e=7.5625,s=2.75;return t<1/s?e*t*t:t<2/s?e*(t-=1.5/s)*t+.75:t<2.5/s?e*(t-=2.25/s)*t+.9375:e*(t-=2.625/s)*t+.984375}function q(t,e=!1){return e?Array.isArray(e)?function(t,e){const[s,i,r,n]=e;if(s===i&&r===n)return t;const o=[];for(let t=0;t<11;++t)o[t]=$(.1*t,s,r);return 0===t?0:1===t?1:$(function(t,e,s){const i=t[0],r=t[2];let n=0,o=1;for(;10!==o&&s[o]<=e;++o)n+=.1;--o;const a=n+(e-s[o])/(s[o+1]-s[o])*.1,h=Q(a,i,r);return h>=.001?function(t,e,s,i){for(let r=0;r<4;++r){const r=Q(e,s,i);if(0===r)return e;e-=($(e,s,i)-t)/r}return e}(e,a,i,r):0===h?a:function(t,e,s,i,r){let n,o,a=0;do{o=e+(s-e)/2,n=$(o,i,r)-t,n>0?s=o:e=o}while(Math.abs(n)>1e-7&&++a<10);return o}(e,n,n+.1,i,r)}(e,t,o),i,n)}(t,e):"function"==typeof e?e(t):function(t,e){switch(e){case U.easeInSine:return s=t,1-Math.cos(s*Math.PI/2);case U.easeOutSine:return function(t){return Math.sin(t*Math.PI/2)}(t);case U.easeInOutSine:return function(t){return-(Math.cos(Math.PI*t)-1)/2}(t);case U.easeInQuad:return function(t){return Math.pow(t,2)}(t);case U.easeOutQuad:return function(t){return 1-Math.pow(1-t,2)}(t);case U.easeInOutQuad:return function(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}(t);case U.easeInCubic:return function(t){return Math.pow(t,3)}(t);case U.easeOutCubic:return function(t){return 1-Math.pow(1-t,3)}(t);case U.easeInOutCubic:return function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}(t);case U.easeInQuart:return function(t){return Math.pow(t,4)}(t);case U.easeOutQuart:return function(t){return 1-Math.pow(1-t,4)}(t);case U.easeInOutQuart:return function(t){return t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2}(t);case U.easeInQuint:return function(t){return Math.pow(t,5)}(t);case U.easeOutQuint:return function(t){return 1-Math.pow(1-t,5)}(t);case U.easeInOutQuint:return function(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2}(t);case U.easeInExpo:return function(t){return 0===t?0:Math.pow(2,10*t-10)}(t);case U.easeOutExpo:return function(t){return 1===t?1:1-Math.pow(2,-10*t)}(t);case U.easeInOutExpo:return function(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}(t);case U.easeInCirc:return function(t){return 1-Math.sqrt(1-Math.pow(t,2))}(t);case U.easeOutCirc:return function(t){return Math.sqrt(1-Math.pow(t-1,2))}(t);case U.easeInOutCirc:return function(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2}(t);case U.easeInBack:return function(t){return 2.70158*t*t*t-1.70158*t*t}(t);case U.easeOutBack:return function(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}(t);case U.easeInOutBack:return function(t){const e=2.5949095;return t<.5?Math.pow(2*t,2)*(7.189819*t-e)/2:(Math.pow(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2}(t);case U.easeInElastic:return function(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*e)}(t);case U.easeOutElastic:return function(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1}(t);case U.easeInOutElastic:return function(t){const e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1}(t);case U.easeInBounce:return function(t){return 1-Y(1-t)}(t);case U.easeOutBounce:return Y(t);case U.easeInOutBounce:return function(t){return t<.5?(1-Y(1-2*t))/2:(1+Y(2*t-1))/2}(t);default:return t}var s}(t,e):t}!function(t){t.easeInSine="easeInSine",t.easeOutSine="easeOutSine",t.easeInOutSine="easeInOutSine",t.easeInQuad="easeInQuad",t.easeOutQuad="easeOutQuad",t.easeInOutQuad="easeInOutQuad",t.easeInCubic="easeInCubic",t.easeOutCubic="easeOutCubic",t.easeInOutCubic="easeInOutCubic",t.easeInQuart="easeInQuart",t.easeOutQuart="easeOutQuart",t.easeInOutQuart="easeInOutQuart",t.easeInQuint="easeInQuint",t.easeOutQuint="easeOutQuint",t.easeInOutQuint="easeInOutQuint",t.easeInExpo="easeInExpo",t.easeOutExpo="easeOutExpo",t.easeInOutExpo="easeInOutExpo",t.easeInCirc="easeInCirc",t.easeOutCirc="easeOutCirc",t.easeInOutCirc="easeInOutCirc",t.easeInBack="easeInBack",t.easeOutBack="easeOutBack",t.easeInOutBack="easeInOutBack",t.easeInElastic="easeInElastic",t.easeOutElastic="easeOutElastic",t.easeInOutElastic="easeInOutElastic",t.easeInBounce="easeInBounce",t.easeOutBounce="easeOutBounce",t.easeInOutBounce="easeInOutBounce"}(U||(U={}));const K=q;function J(t=window){if(t)return{scrollTop:t instanceof Window?t.pageYOffset:t.scrollTop,scrollLeft:t instanceof Window?t.pageXOffset:t.scrollLeft}}class G extends O{constructor(t,e=!0){super(t,!1),this._progress=0,this._easing=0,this._nestedTimelines=[],e&&this.init()}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{easing:this._app.prop.easing,scope:[0,1],useNestedEasingProgress:!1})}get progress(){return this._progress}set progress(t){this._progress=t,this._handleProgress()}get easing(){return this._easing}addNestedTimeline(t){this._nestedTimelines.push(t)}_handleProgress(){this._easing=q(this._progress,this.prop.easing),this._callbacks.tbt("progress",{progress:this._progress,easing:this._easing}),this._renderNestedTimelines()}_renderNestedTimelines(){const{length:t}=this._nestedTimelines;if(0===t)return;const e=this.prop.useNestedEasingProgress?this.easing:this.progress;for(let s=0,i=t;s<i;s+=1){const t=this._nestedTimelines[s],i=S(j(e,t.prop.nestedScope),[0,1]);t.progress=i}}_destroy(){super._destroy(),this._nestedTimelines.forEach((t=>{t.destroy()}))}}class Z extends G{constructor(t,e=!0){super(t,!1),this._isPlaying=!1,this._isReversed=!1,this._isPaused=!1,this._animationFrame=void 0,this._animationFrameLastTime=0,e&&this.init()}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{duration:1e3,reset:!1,destroyOnEnd:!1})}get isPlaying(){return void 0!==this._animationFrame}get isReversed(){return this._isReversed}get isPaused(){return this._isPaused}play(){this._destroyed||(this.prop.reset&&1===this.progress&&(this._progress=0),this._isReversed=!1,this._isPaused=!1,this.isPlaying||(this._animationFrameLastTime=+new Date,this._animate()))}reverse(){this._destroyed||(this.prop.reset&&0===this.progress&&(this._progress=1),this._isReversed=!0,this._isPaused=!1,this.isPlaying||(this._animationFrameLastTime=+new Date,this._animate()))}pause(){this._destroyed||(this._isPaused=!0,this._animationFrame&&window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}_animate(){if(this._isPaused)return;const{isReversed:t}=this,e=+new Date,s=Math.abs(this._animationFrameLastTime-e);this._animationFrameLastTime=e;const i=s/this.prop.duration/(t?-1:1),r=S(this.progress+i,[0,1]);if(this.progress=r,1===r&&!t||0===r&&t)return this._isReversed=!1,this._isPaused=!1,void(this._animationFrame=void 0);this._animationFrame=window.requestAnimationFrame(this._animate.bind(this))}_handleProgress(){super._handleProgress();const t=this._progress;0===t?this.callbacks.tbt("start",!1):1===t&&(this.callbacks.tbt("end",!1),this.prop.destroyOnEnd&&this.destroy())}_destroy(){this.pause(),super._destroy()}}function tt({container:t=window,top:e=0,left:s=0,duration:i=250}){return new Promise(((r,n)=>{const o=J(t);if(o){const n=new Z({duration:i});return n.addCallback("progress",(i=>{t&&t.scrollTo({top:o.scrollTop+(e-o.scrollTop)*i.easing,left:o.scrollLeft+(s-o.scrollLeft)*i.easing,behavior:"auto"})})),n.addCallback("end",(()=>{r()})),void n.play()}n()}))}function et({container:t=window,el:e,top:s=0,left:i=0,duration:r=250}){return new Promise(((n,o)=>{const a=J(t);if(a){const h=m(e);if(h){const e=h.getBoundingClientRect(),l=S(e.top+a.scrollTop-s,[0,1/0]),c=S(e.left+a.scrollLeft-i,[0,1/0]);tt({container:t,top:l,left:c,duration:r}).then((()=>{n()})).catch((()=>{o()}))}}else o()}))}class st extends Error{constructor(t){super(t||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class it{static fn(t){return(...e)=>new it(((s,i,r)=>{e.push(r),t(...e).then(s,i)}))}constructor(t){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise(((e,s)=>{this._reject=s;const i=t=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(t)};Object.defineProperties(i,{shouldReject:{get:()=>this._rejectOnCancel,set:t=>{this._rejectOnCancel=t}}}),t((t=>{this._isCanceled&&i.shouldReject||(this._isPending=!1,e(t))}),(t=>{this._isPending=!1,s(t)}),i)}))}then(t,e){return this._promise.then(t,e)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}cancel(t){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const t of this._cancelHandlers)t()}catch(t){return void this._reject(t)}this._rejectOnCancel&&this._reject(new st(t))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(it.prototype,Promise.prototype);const rt=[];function nt(t,e){const s=Object.assign(Object.assign({},{crossOrigin:null,useCache:!1}),e),i="string"==typeof t?t:t.src;return new it(((e,r)=>{const n=s.useCache&&rt.find((t=>t.src===i));if(n)e(n.image);else{if("string"==typeof t){const n=new Image;return n.crossOrigin=s.crossOrigin,n.onload=()=>{s.useCache&&rt.push({src:i,image:n}),e(n)},n.onerror=()=>{r()},void(n.src=t)}t instanceof HTMLImageElement&&(t.complete?e(t):(t.addEventListener("load",(()=>{s.useCache&&rt.push({src:i,image:t}),e(t)})),t.addEventListener("error",(()=>{r()}))))}}))}function ot(t){return Object.keys(t).map((e=>{const s=t[e];if(s)return`${s} ${e}w`})).filter((t=>!!t)).join(", ")}function at(t){const e=window.vevetApp;let s=t.original;t.thumb&&(s=t.thumb),e&&e.supportsWebp&&t.thumbWebp&&(s=t.thumbWebp);let i="";return e&&e.supportsWebp&&"sizesWebp"in t&&t.sizesWebp?i=ot(t.sizesWebp):"sizes"in t&&t.sizes&&(i=ot(t.sizes)),{src:s,srcSet:i}}var ht,lt,ct=/iPhone/i,dt=/iPod/i,ut=/iPad/i,pt=/\biOS-universal(?:.+)Mac\b/i,_t=/\bAndroid(?:.+)Mobile\b/i,gt=/Android/i,ft=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,mt=/Silk/i,vt=/Windows Phone/i,bt=/\bWindows(?:.+)ARM\b/i,wt=/BlackBerry/i,yt=/BB10/i,xt=/Opera Mini/i,Et=/\b(CriOS|Chrome)(?:.+)Mobile/i,Pt=/Mobile(?:.+)Firefox\b/i,Lt=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream},Ct=function(t,e,s){if(s||2===arguments.length)for(var i,r=0,n=e.length;r<n;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Tt=function(t,e,s){this.name=t,this.version=e,this.os=s,this.type="browser"},kt=function(t){this.version=t,this.type="node",this.name="node",this.os=process.platform},Ot=function(t,e,s,i){this.name=t,this.version=e,this.os=s,this.bot=i,this.type="bot-device"},St=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Mt=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Wt=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,It=3,Dt=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],zt=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function At(t){var e=function(t){return""!==t&&Dt.reduce((function(e,s){var i=s[0],r=s[1];if(e)return e;var n=r.exec(t);return!!n&&[i,n]}),!1)}(t);if(!e)return null;var s=e[0],i=e[1];if("searchbot"===s)return new St;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<It&&(r=Ct(Ct([],r,!0),function(t){for(var e=[],s=0;s<t;s++)e.push("0");return e}(It-r.length),!0)):r=[];var n=r.join("."),o=function(t){for(var e=0,s=zt.length;e<s;e++){var i=zt[e],r=i[0];if(i[1].exec(t))return r}return null}(t),a=Wt.exec(t);return a&&a[1]?new Ot(s,n,o,a[1]):new Tt(s,n,o)}!function(t){t.Desktop="desktop",t.Tablet="tablet",t.Phone="phone"}(ht||(ht={})),function(t){t.Landscape="landscape",t.Portrait="portrait"}(lt||(lt={}));class jt extends C{constructor(){super(!1),this._width=0,this._height=0,this._radius=0,this._prevSize={w:0,h:0},this._isDesktop=!1,this._isTablet=!1,this._isPhone=!1,this._init()}get width(){return this._width}get height(){return this._height}get radius(){return Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/2}get vw(){return this.width/100}get vh(){return this.height/100}get vr(){return this.radius/100}get prevSize(){return this._prevSize}get isLandscape(){return this.width>this.height}get isPortrait(){return this.width<this.height}get isDesktop(){return this._isDesktop}get isTablet(){return this._isTablet}get isPhone(){return this._isPhone}get dpr(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:1}get lowerDesktopDPR(){return this._app.isDesktop?1:this.dpr}_constructor(){super._constructor(),this._setValues()}_setEvents(){window.addEventListener("resize",(()=>{this._resizeTimeout&&this._resizeTimeout.clear(),this._resizeTimeout=_((()=>{this._onResize()}),this._app.prop.viewportResizeTimeout)}))}_setValues(){const t=this._app,{html:e}=t,s=t.prop;this._width=e.clientWidth,this._height=e.clientHeight,this._prevSize={w:this._width,h:this._height};const{width:i}=this;this._isDesktop=i>=s.tablet,this._isTablet=i<=s.tablet&&i>s.phone,this._isPhone=i<=s.phone,this._updateClasses(),this._updateCSSVars()}_updateClasses(){const t=[ht.Desktop,ht.Tablet,ht.Phone];this.isDesktop?this._updateBreakpointClasses(ht.Desktop,t):this.isTablet?this._updateBreakpointClasses(ht.Tablet,t):this._updateBreakpointClasses(ht.Phone,t);const e=[lt.Landscape,lt.Portrait];this.isLandscape?this._updateBreakpointClasses(lt.Landscape,e):this.isPortrait?this._updateBreakpointClasses(lt.Portrait,e):this._updateBreakpointClasses("",e)}_updateBreakpointClasses(t,e){const{html:s}=this._app,{prefix:i}=this._app;e.forEach((e=>{e===t?s.classList.add(`${i}viewport-${e}`):s.classList.remove(`${i}viewport-${e}`)}))}_updateCSSVars(){const{html:t}=this._app;t.style.setProperty("--vw",`${this.vw}px`),t.style.setProperty("--vh",`${this.vh}px`),t.style.setProperty("--vr",`${this.vr}px`)}_onResize(t=!1){const e=this._prevSize.w,s=this._prevSize.h;this._setValues();const{width:i,height:r}=this,n={widthChanged:i!==e,heightChanged:r!==s,orientationChanged:i>r!=e>s};(t||i!==e&&r===s)&&this.tbt("w_",n),(t||r!==s&&i===e)&&this.tbt("h_",n),(t||i!==e&&r!==s)&&(this.tbt("wh",n),this.tbt("hw",n)),(t||i!==e)&&this.tbt("w",n),(t||r!==s)&&this.tbt("h",n),this.tbt("",n)}forceResize(){this._onResize(!0)}}class Bt extends C{constructor(){super(!1),this._loaded=!1,this._init()}get loaded(){return this._loaded}_setEvents(){"complete"===document.readyState?this._handleLoaded():window.addEventListener("load",(()=>{this._handleLoaded()}))}_handleLoaded(){const t=this._app,{prefix:e}=t;this._loaded=!0,t.html.classList.remove(`${e}loading`),t.body.classList.remove(`${e}loading`),t.html.classList.add(`${e}loaded`),this.tbt("",!1)}onLoaded(t){if(!this.loaded)return this.add("",t.bind(this));t()}}class Ft{constructor(t={}){if(this._pages=[],this._page=!1,window.vevetApp)throw new Error("Vevet Application already exists!");this._prop=Object.assign(Object.assign({},this.defaultProp),t),this._prefix=this.prop.prefix,this._sayHi(),window.vevetApp=this;const e=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};"undefined"==typeof navigator||(e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0});var s=e.userAgent,i=s.split("[FBAN");void 0!==i[1]&&(s=i[0]),void 0!==(i=s.split("Twitter"))[1]&&(s=i[0]);var r=function(t){return function(e){return e.test(t)}}(s),n={apple:{phone:r(ct)&&!r(vt),ipod:r(dt),tablet:!r(ct)&&(r(ut)||Lt(e))&&!r(vt),universal:r(pt),device:(r(ct)||r(dt)||r(ut)||r(pt)||Lt(e))&&!r(vt)},amazon:{phone:r(ft),tablet:!r(ft)&&r(mt),device:r(ft)||r(mt)},android:{phone:!r(vt)&&r(ft)||!r(vt)&&r(_t),tablet:!r(vt)&&!r(ft)&&!r(_t)&&(r(mt)||r(gt)),device:!r(vt)&&(r(ft)||r(mt)||r(_t)||r(gt))||r(/\bokhttp\b/i)},windows:{phone:r(vt),tablet:r(bt),device:r(vt)||r(bt)},other:{blackberry:r(wt),blackberry10:r(yt),opera:r(xt),firefox:r(Pt),chrome:r(Et),device:r(wt)||r(yt)||r(xt)||r(Pt)||r(Et)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}();this._isPhone=e.phone,this.html.classList.toggle(`${this.prefix}phone`,this._isPhone),this._isTablet=e.tablet,this.html.classList.toggle(`${this.prefix}tablet`,this._isTablet),this._isMobile=e.phone||e.tablet,this.html.classList.toggle(`${this.prefix}mobile`,this._isMobile),this._isDesktop=!this._isMobile,this.html.classList.toggle(`${this.prefix}desktop`,this._isDesktop);const s=i?At(i):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Mt:"undefined"!=typeof navigator?At(navigator.userAgent):"undefined"!=typeof process&&process.version?new kt(process.version.slice(1)):null;var i;if(null==s?void 0:s.os){const t=s.os.split(" ")[0].toLowerCase();this.html.classList.add(`${this.prefix}os-${t}`),this._osName=t}else this._osName="";if(null==s?void 0:s.name){const t=s.name.toLowerCase();this.html.classList.add(`${this.prefix}browser-${t}`),this._browserName=t}else this._browserName="";if(this._pageLoad=new Bt,this._viewport=new jt,this.prop.webpSupport){const t=new Image;t.onload=()=>{this._supportsWebp=1===t.width},t.onerror=()=>{this._supportsWebp=!1},t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="}else this._supportsWebp=!1}get version(){return"2.17.0"}get prop(){return this._prop}get defaultProp(){return{sayHi:!0,tablet:1199,phone:899,prefix:"v-",easing:[.25,.1,.25,1],viewportResizeTimeout:0,webpSupport:!1}}get prefix(){return this._prefix}get isPhone(){return this._isPhone}get isTablet(){return this._isTablet}get isMobile(){return this._isMobile}get isDesktop(){return this._isDesktop}get osName(){return this._osName}get browserName(){return this._browserName}get supportsWebp(){return this._supportsWebp}get doc(){return document}get html(){return document.documentElement}get body(){return document.body}get pages(){return this._pages}get page(){return this._page}set page(t){this._page=t}onPageCreated(){return new it((t=>{this._page?this._page.onCreate().then((()=>{t(this.page)})):setTimeout((()=>{this.onPageCreated().then((()=>{t(this.page)}))}),30)}))}onPageShown(){return new it((t=>{this.onPageCreated().then((()=>{this._page&&this._page.onShow().then((()=>{t(this.page)}))}))}))}get pageLoad(){return this._pageLoad}onPageLoaded(){return new it((t=>{this._pageLoad.onLoaded((()=>{t()}))}))}get viewport(){return this._viewport}_sayHi(){if(!this.prop.sayHi)return;const t=`Vevet ${this.version}`,e=["padding: 1rem 1.5rem;","background: #5F2580;","font: 1rem/1 Arial;","color: #ffffff;"].join("");console.log("%c%s",e,t)}}class Ht extends k{constructor(t){super(t,!1)}get component(){return this._component}init(){if(!this._component)throw new Error("Component is not set. Be sure that initlugin is called before.");super.init()}initPlugin(t){this._inited||(this._component=t,this.init())}}class Rt extends O{constructor(t,e=!0){if(super(t,!1),this.prop.container){const t=m(this.prop.container);t instanceof HTMLElement&&(this._container=t)}this._container&&this._container.classList.add(this.prefix),this._startTime=+new Date,this._endTime=1/0,this._toBeHidden=!1,this._isHidden=!1,e&&this.init()}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{container:`#${this.prefix}`,hide:250})}get prefix(){return`${this._app.prefix}preloader`}get container(){return this._container}get startTime(){return this._startTime}get endTime(){return this._endTime}get totalTime(){return this._endTime-this._startTime}get isHidden(){return this._isHidden}_setEvents(){super._setEvents(),this._onLoaded().then((()=>{this._endTime=+new Date,this._handleLoaded()}))}_onLoaded(){return new it((t=>{this._app.pageLoad.loaded?t():this._pageLoadEvent=this._app.pageLoad.add("",(()=>{t()}))}))}_handleLoaded(){this.callbacks.tbt("loaded",!1),"boolean"!=typeof this.prop.hide&&this.hideContainer()}hideContainer(t=("boolean"!=typeof this.prop.hide?this.prop.hide:250)){return this.callbacks.tbt("hide",!1),this._toBeHidden=!0,new it((e=>{const s=this._container;if(!s)return this._handleHidden(),void e();s.style.transition=`opacity ${t}ms, visibility ${t}ms`,s.style.opacity="0",s.style.visibility="hidden",_((()=>{s.style.display="none",this._handleHidden(),e()}),t)}))}_handleHidden(){this._isHidden=!0,this.callbacks.tbt("hidden",!1)}onHide(t){if(!this._toBeHidden)return this.callbacks.add("hide",(()=>{t()}));t()}onHidden(t){if(!this._isHidden)return this.callbacks.add("hidden",(()=>{t()}));t()}_destroy(){var t;super._destroy(),null===(t=this._pageLoadEvent)||void 0===t||t.remove()}}class $t extends Rt{constructor(t,e=!0){super(t,!1),this._imgs=[],this._videos=[],this._customResources=[],this._resourcesTotal=1+this.prop.resources,this._resourcesLoaded=0,this._progress=0,e&&this.init()}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{resources:0,loaders:{img:!0,video:!0,custom:".js-preload",ignoreClassName:"js-preload-ignore"},calc:{lerp:.1,forceEnd:500}})}get imgs(){return this._imgs}get videos(){return this._videos}get customResources(){return this._customResources}get resourcesTotal(){return this._resourcesTotal}get resourcesLoaded(){return this._resourcesLoaded}get loadProgress(){return this.resourcesLoaded/this.resourcesTotal}get progress(){return this._progress}set progress(t){this._progress=t,this._handleProgress()}_constructor(){super._constructor(),this._getResources()}_setEvents(){super._setEvents();const{calc:t}=this.prop,{lerp:e}=t;"number"==typeof e&&(this._animationFrame=new M,this._animationFrame.addCallback("frame",(()=>{this.progress=W(this.progress,this.loadProgress,e)})),this._animationFrame.play()),this._preloadResources(),this._app.onPageLoaded().then((()=>{this._handleLoadedResource()}))}_onLoaded(){return new it((t=>{let e=!1;this.callbacks.add("progress",(s=>{s.progress>=1&&!e&&(t(),e=!0)}),{protected:!0})}))}_getResources(){const{loaders:t}=this.prop;t.img&&E("img").forEach((e=>{e.classList.contains(t.ignoreClassName)||(this._imgs.push(e),this._resourcesTotal+=1)})),t.video&&E("video").forEach((e=>{e.classList.contains(t.ignoreClassName)||(this._videos.push(e),this._resourcesTotal+=1)})),t.custom&&(Array.from(E(t.custom)).forEach((t=>{let e=parseInt(t.getAttribute("data-load-count")||"1",10);e=Number.isNaN(e)?1:S(e,[1,1/0]);for(let s=1;s<=e;s+=1){const i=s/e;this._customResources.push({el:t,targetProgress:i})}})),this._resourcesTotal+=this._customResources.length)}_preloadResources(){0===this._resourcesTotal&&(this._resourcesTotal=1,this._handleLoadedResource()),this._imgs.forEach((t=>{if(t.complete)this._handleLoadedResource();else{const e=new Image;t.addEventListener("load",(()=>{this._handleLoadedResource()})),t.addEventListener("error",(()=>{this._handleLoadedResource()})),e.src=t.currentSrc||t.src}})),this._videos.forEach((t=>{if(t.readyState>0)this._handleLoadedResource();else{if("none"===t.preload)return void this._handleLoadedResource();t.addEventListener("error",(()=>{this._handleLoadedResource()})),t.addEventListener("loadedmetadata",(()=>{this._handleLoadedResource()}))}})),this._customResources.forEach((t=>{this._seekCustomResourceLoaded(t).then((()=>{this._handleLoadedResource()}))}))}_seekCustomResourceLoaded(t){return new Promise((e=>{const{el:s,targetProgress:i}=t;let r=0;if(void 0!==s.isComplete?"boolean"==typeof s.isComplete?s.isComplete&&(r=i):"number"==typeof s.isComplete&&(r=s.isComplete):void 0!==s.isLoaded&&("boolean"==typeof s.isLoaded?s.isLoaded&&(r=i):"number"==typeof s.isLoaded&&(r=s.isLoaded)),0===r){const t=s.getAttribute("data-is-loaded");if(null!==t&&""!==t){const e=parseFloat(t);r=Number.isNaN(e)?i:e}}r>=i?e():setTimeout((()=>{this.destroyed||this._seekCustomResourceLoaded(t).then((()=>{e()}))}),50)}))}addResourcesLoaded(t=1){for(let e=0;e<t;e+=1)this._handleLoadedResource()}addResourcesTotal(t=1){this._resourcesTotal+=t}_handleLoadedResource(){this.loadProgress>=1||(this._resourcesLoaded+=1,this.callbacks.tbt("resourceLoad",!1),this._animationFrame||(this.progress=this.loadProgress))}_handleProgress(){if(this.callbacks.tbt("progress",{progress:this._progress}),this.progress>=1)this._animationFrame&&(this._animationFrame.destroy(),this._animationFrame=void 0);else if("number"==typeof this.prop.calc.forceEnd&&this.loadProgress>=1&&!this._endTimeline){this._animationFrame&&(this._animationFrame.destroy(),this._animationFrame=void 0),this._endTimeline=new Z({duration:this.prop.calc.forceEnd});const t=this.progress;this._endTimeline.addCallback("progress",(e=>{const s=1-t;this.progress=t+s*e.progress})),this._endTimeline.play()}}_destroy(){super._destroy(),this._animationFrame&&this._animationFrame.destroy()}}class Nt extends O{constructor(t,e=!0){super(t,!1),this._blocked=!1,this._created=!1,this._beforeShown=!1,this._shown=!1,this._hidden=!1,this._destroyed=!1,this._viaAJAX=!1,e&&this.init()}get blocked(){return this._blocked}get created(){return this._created}get beforeShown(){return this._beforeShown}get shown(){return this._shown}get hidden(){return this._hidden}get viaAJAX(){return this._viaAJAX}get pageClassName(){return`${this._app.prefix}page-${this.prop.name}`}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{name:"home",hasInnerPreloader:!1})}create(t=!1){return new Promise(((e,s)=>{this.canCreate().then((()=>{this.created||this.blocked?s():(this._blocked=!0,this._beforeShown=!1,this._shown=!1,this._hidden=!1,this._destroyed=!1,this._viaAJAX=t,this._app.page=this,this._app.html.classList.add(this.pageClassName),this._create().then((()=>{this.callbacks.tbt("create",!1),this._blocked=!1,this._created=!0,e()})).catch((()=>{s()})))})).catch((()=>{s()}))}))}_create(){return new Promise((t=>{t()}))}canCreate(){return new Promise(((t,e)=>{this.created?e():t()}))}show(){return new Promise(((t,e)=>{this.canShow().then((()=>{this.shown||this.blocked?e():(this._blocked=!0,this._created=!0,this._hidden=!1,this._destroyed=!1,this.callbacks.tbt("beforeshow",!1),this._beforeShown=!0,this._show().then((()=>{this.callbacks.tbt("show",!1),this._blocked=!1,this._shown=!0,t()})).catch((()=>{e()})))})).catch((()=>{e()}))}))}_show(){const t=this._ignorePreventPageShow();return this.addCallback("destroy",(()=>{t.cancel()})),new Promise(((e,s)=>{t.then((()=>{e()})).catch((()=>{s()}))}))}_ignorePreventPageShow(){return new it(((t,e)=>{this._destroyed&&e(),0===E("[data-prevent-page-show]").length?t():setTimeout((()=>{this._ignorePreventPageShow().then((()=>{t()})).catch((()=>{e()}))}),30)}))}canShow(){return new Promise(((t,e)=>{!this.created||this.shown?e():this.prop.hasInnerPreloader?new $t({parent:this,container:!1,hide:!1,loaders:{img:!1,video:!1,custom:".js-preload-inner"},calc:{lerp:!1}}).addCallback("loaded",(()=>{t()})):t()}))}hide(){return new Promise(((t,e)=>{this.canHide().then((()=>{this.hidden||this.blocked?e():(this._blocked=!0,this._created=!0,this._beforeShown=!1,this._shown=!1,this._destroyed=!1,this._hide().then((()=>{this.callbacks.tbt("hide",!1),this._blocked=!1,this._hidden=!0,t()})).catch((()=>{e()})))})).catch((()=>{e()}))}))}_hide(){return new Promise((t=>{t()}))}canHide(){return new Promise(((t,e)=>{this.created&&this.shown&&!this.hidden?t():e()}))}destroy(){return new Promise(((t,e)=>{this.canDestroy().then((()=>{this.destroyed||this.blocked?e():(this._blocked=!0,this._created=!1,this._beforeShown=!1,this._shown=!1,this._hidden=!0,this._app.page=!1,this._app.html.classList.remove(this.pageClassName),this._destroy().then((()=>{this._blocked=!1,this._destroyed=!0,t()})).catch((()=>{e()})))})).catch((()=>{e()}))}))}_destroy(){return new Promise((t=>{super._destroy(),t()}))}canDestroy(){return new Promise(((t,e)=>{this.created&&this.hidden&&!this.destroyed?t():e()}))}onCreate(){return new it((t=>{this.created?t():this.addCallback("create",(()=>{t()}),{once:!0})}))}onShow(){return new it((t=>{this.shown?t():this.addCallback("show",(()=>{t()}),{once:!0})}))}onBeforeShow(){return new it((t=>{this.shown||this.beforeShown?t():this.addCallback("beforeshow",(()=>{t()}),{once:!0})}))}onHide(){return new it((t=>{this.hidden?t():this.addCallback("hide",(()=>{t()}),{once:!0})}))}}class Vt extends k{constructor(t,e=!0){super(t,!1),this._wheelListener=void 0,this._lockWheel=!1,e&&this.init()}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{container:!1,enabled:!0,stopPropagation:!1,threshold:20})}get container(){return this.prop.container?this.prop.container:window}_setEvents(){super._setEvents(),this.container instanceof Window?this._toggleWheelEvent():(this._listeners.push(b(this.container,"mouseenter",this._handleMouseEnter.bind(this))),this._listeners.push(b(this.container,"mouseleave",this._handleMouseLeave.bind(this))))}_onPropMutate(){super._onPropMutate(),this._toggleWheelEvent()}_handleMouseEnter(){this.prop.enabled&&this._createWheelEvent()}_handleMouseLeave(){this._destroyWheelEvent()}_toggleWheelEvent(){this.prop.enabled?this._createWheelEvent():this._destroyWheelEvent()}_createWheelEvent(){this._wheelListener||(this._lockWheel=!1,this._lockWheelTimeout&&clearTimeout(this._lockWheelTimeout),this._wheelListener=b(this.container,"wheel",this._handleWheel.bind(this)))}_destroyWheelEvent(){this._wheelListener&&(this._wheelListener.remove(),this._wheelListener=void 0)}_handleWheel(t){if(!this._wheelListener)return;if(this.prop.stopPropagation&&(t.preventDefault(),t.stopPropagation()),this._lockWheel)return this._lockWheelTimeout&&clearTimeout(this._lockWheelTimeout),void(this._lockWheelTimeout=setTimeout((()=>{this._lockWheel=!1}),300));const e=L()(t),{threshold:s}=this.prop;let i=!1;e.pixelY>s?(this._callbacks.tbt("down",!1),i=!0):e.pixelY<-1*s&&(this._callbacks.tbt("up",!1),i=!0),e.pixelX>s?(this._callbacks.tbt("right",!1),i=!0):e.pixelX<-1*s&&(this._callbacks.tbt("left",!1),i=!0),i&&(this._lockWheel=!0)}_destroy(){super._destroy(),this._destroyWheelEvent()}}class Xt extends O{constructor(t,e=!0){if(super(t,!1),this._container=m(this.prop.container),!g(this._container)&&!f(this._container))throw new Error("No container");this._runtimeEvents=[],this._isDragging=!1,this._pointerID=null,this._coords={x:0,y:0},this._prevCoords={x:0,y:0},this._startCoords={x:0,y:0},e&&this.init()}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{container:`#${this.prefix}`,usePassive:!1,enabled:!0})}get prefix(){return`${this._app.prefix}dragger`}get container(){return this._container}get isDragging(){return this._isDragging}get coords(){return this._coords}get startCoords(){return this._startCoords}_setEvents(){const{container:t}=this,{usePassive:e}=this.prop;this.addEventListeners(t,"mousedown",this._handleStart.bind(this),{passive:e}),this.addEventListeners(t,"touchstart",this._handleStart.bind(this),{passive:e})}_addRuntimeEvents(){const{usePassive:t}=this.prop;this._runtimeEvents.push(b(window,"mouseup",this._handleEnd.bind(this),{passive:t})),this._runtimeEvents.push(b(window,"touchend",this._handleEnd.bind(this),{passive:t})),this._runtimeEvents.push(b(window,"touchcancel",this.cancel.bind(this),{passive:t})),this._runtimeEvents.push(b(window,"blur",this.cancel.bind(this),{passive:t}))}_removeRuntimeEvents(){this._runtimeEvents.forEach((t=>{t.remove()})),this._runtimeEvents=[]}_normalizeEvent(t){if(t.type.includes("touch")){const e=t,s=e.targetTouches[0]||e.changedTouches[0];return{x:s.clientX,y:s.clientY,id:s.identifier}}const e=t;return{x:e.clientX,y:e.clientY,id:null}}_handleStart(t){if(!this.prop.enabled)return!1;if(this.isDragging)return!1;const e=this._normalizeEvent(t);if("mousedown"===t.type){if(1!==t.which)return!1;t.stopPropagation()}return this._isDragging=!0,this._pointerID=e.id,this._coords={x:e.x,y:e.y},this._prevCoords={x:e.x,y:e.y},this._startCoords={x:e.x,y:e.y},this._addRuntimeEvents(),this.callbacks.tbt("start",{evt:t}),!0}_handleEnd(t){const e=this._normalizeEvent(t);return!(!this.isDragging||e.id!==this._pointerID||(this.cancel(),0))}cancel(){this._removeRuntimeEvents(),this._isDragging=!1,this.callbacks.tbt("end",!1)}_destroy(){super._destroy(),this._removeRuntimeEvents()}}class Qt extends Xt{get stepCoords(){return{x:this._coords.x-this._prevCoords.x,y:this._coords.y-this._prevCoords.y}}_addRuntimeEvents(){super._addRuntimeEvents();const{usePassive:t}=this.prop;this._runtimeEvents.push(b(window,"mousemove",this._handleMove.bind(this),{passive:t})),this._runtimeEvents.push(b(window,"touchmove",this._handleMove.bind(this),{passive:t}))}_handleMove(t){const e=this._normalizeEvent(t);return!(!this.isDragging||e.id!==this._pointerID||(this._prevCoords={x:this._coords.x,y:this._coords.y},this._coords={x:e.x,y:e.y},this.callbacks.tbt("move",{evt:t,start:this.startCoords,coords:this.coords,step:this.stepCoords}),0))}_destroy(){super._destroy()}}class Ut extends Xt{_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{min:75})}_handleEnd(t){const e=super._handleEnd(t);if(!e)return e;const s=this._normalizeEvent(t),{startCoords:i}=this,r=Math.abs(this.prop.min);return i.y>s.y&&Math.abs(s.y-i.y)>=r&&this.callbacks.tbt("up",!1),i.y<s.y&&Math.abs(s.y-i.y)>=r&&this.callbacks.tbt("down",!1),i.x>s.x&&Math.abs(s.x-i.x)>=r&&this.callbacks.tbt("left",!1),i.x<s.x&&Math.abs(s.x-i.x)>=r&&this.callbacks.tbt("right",!1),!0}}class Yt extends O{constructor(t,e=!0){super(t,!1),this._width=0,this._height=0,this._dpr=1;const{append:s,container:i}=this.prop,r=s&&i?i:void 0;this._canvas=x("canvas",{parent:r}),this._ctx=this._canvas.getContext("2d"),this.prop.initialResize&&this.resize(),e&&this.init()}get container(){return this.prop.container}get canvas(){return this._canvas}get ctx(){return this._ctx}get width(){return this._width}get nonDPRWidth(){return this.width/this.dpr}get clientWidth(){return this.width/this.dpr}get height(){return this._height}get nonDPRHeight(){return this.height/this.dpr}get clientHeight(){return this.height/this.dpr}get dpr(){return this._dpr}get canRender(){return this.width>0&&this.height>0}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{container:!1,append:!0,updateOnResize:!1,initialResize:!0,resizeTimeout:0,width:!1,height:!1,dpr:!1})}_setEvents(){if(super._setEvents(),!1!==this.prop.updateOnResize){const t="boolean"==typeof this.prop.updateOnResize?"":this.prop.updateOnResize;this.addViewportCallback(t,(()=>{this.resize()}),{timeout:this.prop.resizeTimeout}),this.resize()}}_onPropMutate(){super._onPropMutate(),this.resize()}resize(){const{prop:t,canvas:e}=this;if(!e)return;const s=this._app,{viewport:i}=s;"number"==typeof t.dpr?this._dpr=t.dpr:this._dpr=i.dpr;const r=this._dpr;let n=0,o=0;"number"==typeof t.width&&"number"==typeof t.height?(n=t.width,o=t.height):this.container?(n=this.container.clientWidth,o=this.container.clientHeight):(n=i.width,o=i.height),n*=r,o*=r,this._width=n,this._height=o,e.width=n,e.height=o,this.callbacks.tbt("resize",!1)}_destroy(){super._destroy(),this.canvas&&this.canvas.remove()}}function qt(t){return void 0!==t.scale?t.scale:1}class Kt extends Yt{_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{media:!1,posRule:"cover"})}resize(){super.resize(),this._prerender()}_prerender(){if(0===this.width||0===this.height)return;const{media:t}=this.prop;if(!t)return;let e,s,i;t instanceof Yt?(e=t.canvas,s=t.width,i=t.height):e=t;const r=function(t){const e=function(t){return"container"in t?{width:t.container.clientWidth,height:t.container.clientHeight}:{width:t.width,height:t.height}}(t),s=function(t){const{source:e}=t;return t.sourceWidth&&t.sourceHeight?{width:t.sourceWidth,height:t.sourceHeight}:e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:{width:e.width,height:e.height}}(t);let i;return"cover"===t.rule?i=function(t,e,s){let i=e.width*qt(t),r=s.height*i/s.width;return r/qt(t)<e.height&&(r=e.height*qt(t),i=s.width*r/s.height),{width:i,height:r,x:(e.width-i)/2,y:(e.height-r)/2}}(t,e,s):"contain"===t.rule?i=function(t,e,s){let i=0,r=0;const n=s.width/s.height;return e.width>e.height?(r=e.height,i=r*n,i>e.width&&(i=e.width,r=i/n)):e.height>=e.width&&(i=e.width,r=i/n,r>e.height&&(r=e.height,i=r*n)),i*=qt(t),r*=qt(t),{width:i,height:r,x:(e.width-i)/2,y:(e.height-r)/2}}(t,e,s):"top-left"===t.rule?i=function(t,e){return{width:e.width*qt(t),height:e.height*qt(t),x:0,y:0}}(t,s):"top-right"===t.rule?i=function(t,e,s){return{width:s.width*qt(t),height:s.height*qt(t),x:e.width-s.width,y:0}}(t,e,s):"bottom-left"===t.rule?i=function(t,e,s){return{width:s.width*qt(t),height:s.height*qt(t),x:0,y:e.height-s.height}}(t,e,s):"bottom-right"===t.rule?i=function(t,e,s){return{width:s.width*qt(t),height:s.height*qt(t),x:e.width-s.width,y:e.height-s.height}}(t,e,s):"center"===t.rule&&(i=function(t,e,s){return{width:s.width*qt(t),height:s.height*qt(t),x:(e.width-s.width)/2,y:(e.height-s.height)/2}}(t,e,s)),Object.assign(i,{sourceWidth:s.width,sourceHeight:s.height})}({source:e,sourceWidth:s,sourceHeight:i,rule:this.prop.posRule,scale:1,width:this.width,height:this.height});this._ctx.clearRect(0,0,this.width,this.height),this._ctx.drawImage(e,r.x,r.y,r.width,r.height),this.callbacks.tbt("prerender",!1)}}class Jt{constructor(t){this._prop=t;const{prefix:e,dir:s,domParent:i,container:r,autoHide:n}=t;this._outerHeight=0,this._outerWidth=0,this._thumbHeight=0,this._thumbWidth=0,this._scrollVal=0,this._coordsAtDragStart={left:0,top:0},this._scrollEvent=void 0,this._actionTimeout=void 0,this._dragger=void 0;let o=`${e} ${e}_${s}`;r instanceof Window&&(o+=" in-window"),this._outer=x("div",{parent:i,class:o}),this._thumb=x("div",{parent:this._outer,class:`${e}__thumb ${e}__thumb_${s}`}),n&&this.outer.classList.add("auto-hide"),this._listeners=[],this._setEvents()}get outer(){return this._outer}get thumb(){return this._thumb}get prefix(){return this._prop.prefix}get isX(){return"x"===this.prop.dir}get isY(){return!this.isX}get scrollElement(){return this.prop.container instanceof Window?document.documentElement:this.prop.container}get scrollLine(){const{scrollElement:t}=this;return this.isX?t.scrollWidth-t.clientWidth:t.scrollHeight-t.clientHeight}get scrollWidth(){return this.scrollElement.scrollWidth}get scrollHeight(){return this.scrollElement.scrollHeight}get prop(){return this._prop}get scrollValues(){const{container:t}=this.prop;let e=0,s=0;return t instanceof Window?(e=t.pageYOffset,s=t.pageXOffset):t instanceof I?(e=t.targetTop,s=t.targetLeft):(e=t.scrollTop,s=t.scrollLeft),{left:s,top:e}}_setEvents(){this._listeners.push(b(this.outer,"mouseenter",this._handleHover.bind(this,!0))),this._listeners.push(b(this.outer,"mouseleave",this._handleHover.bind(this,!1))),this._scrollEvent=z({container:this.prop.container,callback:t=>{this._handleScroll(t)}}),this.prop.isDraggable&&(this._dragger=new Qt({container:this.thumb}),this._dragger.addCallback("start",(()=>{this.thumb.classList.add("in-action"),this._disableScrollBehaviour(!0),this._coordsAtDragStart=this.scrollValues})),this._dragger.addCallback("move",(t=>{this._handleThumbDrag(t)})),this._dragger.addCallback("end",(()=>{this.thumb.classList.remove("in-action"),this._disableScrollBehaviour(!1)})))}_disableScrollBehaviour(t){const e=t?"auto":"unset";(this.prop.container instanceof Window||this.prop.container instanceof HTMLElement)&&(document.documentElement.style.scrollBehavior=e)}_handleHover(t){this.outer.classList.toggle("is-hovered",t)}_handleScroll(t){this.prop.optimizeCalculations||this.resize();let e=!1;this.isX?(e=t.scrollLeft!==this._scrollVal,this._scrollVal=t.scrollLeft):(e=t.scrollTop!==this._scrollVal,this._scrollVal=t.scrollTop),e&&(this.prop.autoHide&&e&&(this.outer.classList.add("in-action"),this._actionTimeout&&(clearTimeout(this._actionTimeout),this._actionTimeout=void 0),this._actionTimeout=setTimeout((()=>{this.outer.classList.remove("in-action")}),500)),this.prop.optimizeCalculations&&this._renderThumb())}_handleThumbDrag(t){t.evt.preventDefault();const{container:e}=this.prop,s=(t.coords.x-t.start.x)/(this._outerWidth-this._thumbWidth)*this.scrollLine,i=(t.coords.y-t.start.y)/(this._outerHeight-this._thumbHeight)*this.scrollLine;let{left:r,top:n}=this._coordsAtDragStart;this.isX?r+=s:n+=i,e.scrollTo({top:n,left:r,behavior:e instanceof I?this.prop.draggableScrollBehavior:"auto"})}_renderThumb(){const t=S(this._scrollVal/this.scrollLine,[0,1]),e=this.isX?(this._outerWidth-this._thumbWidth)*t:0,s=this.isY?(this._outerHeight-this._thumbHeight)*t:0;this._thumb.style.transform=`translate(${e}px, ${s}px)`}resize(){const{outer:t,thumb:e,scrollLine:s}=this,{minSize:i}=this.prop;if(this._outerHeight=t.clientHeight,this._outerWidth=t.clientWidth,this.prop.autoSize)if(this.isX){const t=S(this._outerWidth/(this.scrollWidth/(this.scrollWidth-s)),[i,1/0]);e.style.width=`${t}px`}else{const t=S(this._outerHeight/(this.scrollHeight/(this.scrollHeight-s)),[i,1/0]);e.style.height=`${t}px`}this._thumbHeight=e.clientHeight,this._thumbWidth=e.clientWidth,t.classList.toggle("is-empty",0===s),this._renderThumb()}destroy(){this._listeners.forEach((t=>{t.remove()})),this._scrollEvent&&this._scrollEvent.remove(),this._actionTimeout&&clearTimeout(this._actionTimeout),this._dragger&&this._dragger.destroy(),this._outer.remove()}}class Gt extends O{constructor(t,e=!0){super(t,!1);const{autoHide:s,autoSize:i,minSize:r,optimizeCalculations:n,isDraggable:o,draggableScrollBehavior:a}=this.prop;if("string"==typeof this.prop.container){const t=m(this.prop.container);if(!t)throw new Error("No scroll container");this._container=t}else this._container=this.prop.container;if(this.container instanceof Element){const{parentElement:t}=this.container;t&&(this._scrollWrapper=x("div"),this._scrollWrapper.style.position="relative",this._scrollWrapper.style.display="inline-block",t.insertBefore(this._scrollWrapper,this.container),this._scrollWrapper.appendChild(this.container),this._scrollWrapper.classList.add(`${this.prefix}-wrapper`))}const h={container:this.container,domParent:this.domParent,autoHide:s,autoSize:i,minSize:r,optimizeCalculations:n,prefix:this.prefix,isDraggable:o,draggableScrollBehavior:a};this._xBar=new Jt(Object.assign({dir:"x"},h)),this._yBar=new Jt(Object.assign({dir:"y"},h)),this.scrollableElement.classList.add(`${this.prefix}-parent`),e&&this.init()}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{container:window,domParent:!1,draggable:!0,autoSize:!0,autoHide:!0,minSize:50,optimizeCalculations:!1,resizeTimeout:0,isDraggable:!0,draggableScrollBehavior:"smooth"})}get prefix(){return`${this._app.prefix}scrollbar`}get container(){return this._container}get scrollableElement(){const{container:t}=this;return t instanceof Window?this._app.body:t instanceof Element?t:t.outer}get domParent(){const{domParent:t}=this.prop,{container:e}=this;return t||(this._scrollWrapper?this._scrollWrapper:e instanceof Window?this._app.body:e instanceof Element?e:e.outer)}_setEvents(){super._setEvents();const{container:t}=this;t instanceof I?t.addCallback("resize",(()=>{this.resize()}),{name:this.name}):this.addViewportCallback("",(()=>{this.resize()}),{timeout:this.prop.resizeTimeout}),this.resize()}_onPropMutate(){super._onPropMutate(),this.resize()}resize(){this._xBar.resize(),this._yBar.resize()}_destroy(){if(super._destroy(),this._xBar.destroy(),this._yBar.destroy(),this._scrollWrapper&&this.container instanceof Element){const{parentElement:t}=this._scrollWrapper;t&&t.insertBefore(this.container,this._scrollWrapper),this._scrollWrapper.remove()}this.scrollableElement.classList.remove(`${this.prefix}-parent`)}}class Zt extends O{constructor(t,e=!0){super(t,!1),"string"==typeof this.prop.container?this._scrollContainer=m(this.prop.container):this._scrollContainer=this.prop.container,e&&this.init()}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{container:window,intersectionRoot:!1})}get scrollContainer(){return this._scrollContainer}get scrollableElement(){return this._scrollContainer instanceof Window?this._app.html:this._scrollContainer}get domParent(){const{scrollContainer:t}=this;return t instanceof Window?this._app.body:t instanceof Element?t:t.outer}get intersectionRoot(){if(!1===this.prop.intersectionRoot){const{scrollContainer:t}=this;return t instanceof Window?null:t instanceof Element?t:t.outer}return this.prop.intersectionRoot}get scrollContainerBounding(){if(this.intersectionRoot){const t=this.intersectionRoot.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}return{top:0,left:0,width:this._app.viewport.width,height:this._app.viewport.height}}}class te extends Zt{constructor(t,e=!0){super(t,!1),this._scrollEvent=void 0,this._intersectionObserverIn=void 0,this._intersectionObserverOut=void 0,this._firstStart=!0,this._elements=[...this.prop.elements],e&&this.init()}get prefix(){return`${this._app.prefix}scroll-view`}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{enabled:!0,container:window,elements:[],threshold:.9,states:"in",classToToggle:"viewed",useDelay:!1,useIntersectionObserver:!0,viewportTarget:"",resizeTimeout:0})}get elements(){return this._elements}init(){super.init()}_setEvents(){super._setEvents(),this.resize(),this.addViewportCallback(this.prop.viewportTarget,(()=>{this.resize()}),{timeout:this.prop.resizeTimeout})}_onPropMutate(){super._onPropMutate(),this.resize()}resize(){this._removeViewEvents(),this.prop.enabled&&(this._setViewEvents(),this.seekBounding())}_setViewEvents(){if(A()&&this.prop.useIntersectionObserver){const{scrollContainerBounding:t}=this,e=this._firstStart?0:t.width*(1-this.prop.threshold)*-1,s=this._firstStart?0:t.height*(1-this.prop.threshold)*-1;this._intersectionObserverIn=new IntersectionObserver(this._handleIntersectionObserverIn.bind(this),{root:this.intersectionRoot,threshold:0,rootMargin:`0px ${e}px ${s}px 0px`}),this.elements.forEach((t=>{var e;null===(e=this._intersectionObserverIn)||void 0===e||e.observe(t)})),"inout"===this.prop.states&&(this._intersectionObserverOut=new IntersectionObserver(this._handleIntersectionObserverOut.bind(this),{root:this.intersectionRoot,threshold:0,rootMargin:"0px 0px 0px 0px"}),this.elements.forEach((t=>{var e;null===(e=this._intersectionObserverOut)||void 0===e||e.observe(t)})))}else this._scrollEvent=z({container:this.prop.container,callback:this._handleScroll.bind(this)})}_removeViewEvents(){var t,e;this._scrollEvent&&(this._scrollEvent.remove(),this._scrollEvent=void 0),null===(t=this._intersectionObserverIn)||void 0===t||t.disconnect(),this._intersectionObserverIn=void 0,null===(e=this._intersectionObserverOut)||void 0===e||e.disconnect(),this._intersectionObserverOut=void 0}_handleIntersectionObserverIn(t){const e=!!this._firstStart&&this.scrollContainerBounding;for(let s=0;s<t.length;s+=1){const i=t[s];let r=0;this._firstStart&&e&&i.isIntersecting&&(r=this._elementInViewportData(i.target,e).delay),i.isIntersecting&&this._handleInOut(i.target,i.isIntersecting,r)}this._processUnusedElements(),this._firstStart&&(this._firstStart=!1,this.resize())}_handleIntersectionObserverOut(t){for(let e=0;e<t.length;e+=1){const s=t[e];s.isIntersecting||this._handleInOut(s.target,s.isIntersecting,0)}}_handleScroll(){this.seekBounding()}seekBounding(){if(A()&&this.prop.useIntersectionObserver)return;const{scrollContainerBounding:t}=this;for(let e=0;e<this.elements.length;e+=1){const s=this.elements[e],i=this._elementInViewportData(s,t),r=i.isIntersecting?i.delay:0;"boolean"==typeof i.isIntersecting&&this._handleInOut(s,i.isIntersecting,r)}this._processUnusedElements(),this._firstStart&&(this._firstStart=!1)}_elementInViewportData(t,e){const{threshold:s,states:i,useDelay:r}=this.prop,n=this._firstStart?1:s,o=t.getBoundingClientRect();let a;o.top<e.top+e.height*n&&o.left<e.left+e.width*n?a="in"===i||!(o.right<e.left*n||o.bottom<e.top*n):(o.top>e.top+e.height||o.left>e.left+e.width)&&(a=!1);let h=0;return r&&this._firstStart&&(h=S("x"===r.dir?(o.left-e.left)/e.width:(o.top-e.top)/e.height,[0,1])*r.max),{isIntersecting:a,delay:h}}_handleInOut(t,e,s=0){const{states:i}=this.prop;t.scrollViewIn&&e||!t.scrollViewIn&&!e||(t.scrollViewIn=e,this.prop.classToToggle&&_((()=>{t.classList.toggle(this.prop.classToToggle,e)}),s),!e||"in"!==i&&"inout"!==i?e||"inout"!==i||_((()=>{this.callbacks.tbt("out",t)}),s):_((()=>{this.callbacks.tbt("in",t)}),s))}_processUnusedElements(){"in"===this.prop.states&&(this._elements.filter((t=>t.scrollViewIn)).forEach((t=>{var e,s;null===(e=this._intersectionObserverIn)||void 0===e||e.unobserve(t),null===(s=this._intersectionObserverOut)||void 0===s||s.unobserve(t)})),this._elements=this._elements.filter((t=>!t.scrollViewIn)))}addElement(t){var e,s;return t.scrollViewIn=void 0,this._elements.push(t),null===(e=this._intersectionObserverIn)||void 0===e||e.observe(t),null===(s=this._intersectionObserverOut)||void 0===s||s.observe(t),this.prop.enabled&&this.seekBounding(),{remove:()=>{this.removeElement(t)}}}removeElement(t){var e,s;t.scrollViewIn=void 0,this._elements=this._elements.filter((e=>e!==t)),null===(e=this._intersectionObserverIn)||void 0===e||e.unobserve(t),null===(s=this._intersectionObserverOut)||void 0===s||s.unobserve(t)}removeElements(){this._elements.forEach((t=>{this.removeElement(t)})),this._elements=[]}_destroy(){super._destroy(),this._removeViewEvents()}}function ee(t,e){return se(t,e)}function se(t,e){return t===e||null!==t&&se(t.parentNode,e)}class ie extends Ht{_setEvents(){super._setEvents(),this.addEventListeners(window,"keydown",(t=>{this._handleKeydown(t)}))}_handleKeydown(t){const e=this._component;if(!e.prop.enabled)return;if(9===t.keyCode)return void this._handleTab();const{activeElement:s}=document;if(s&&(s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement))return;const{viewport:i}=this._app,r=e.outer.getBoundingClientRect();if(!(r.left<i.width&&r.right>0&&r.top<i.height&&r.bottom>0))return;switch(t.keyCode){case 38:e.targetTop-=40;break;case 40:e.targetTop+=40;break;case 39:e.targetLeft+=40;break;case 37:e.targetLeft-=40;break;case 34:e.targetTop+=400;break;case 33:e.targetTop-=400;break;case 36:e.targetTop=0,e.targetLeft=0;break;case 35:e.targetTop=e.scrollHeight,e.targetLeft=e.scrollWidth;break;case 32:e.targetTop+=200}}_handleTab(){_((()=>{const t=this._component,{activeElement:e}=document;if(!(e instanceof HTMLElement&&ee(e,t.outer)))return;const s=t.outer.getBoundingClientRect(),i=e.getBoundingClientRect(),r=t.scrollTop+(i.top-s.top)-(t.clientHeight/2-i.height/2),n=t.scrollLeft+(i.left-s.left)-(t.clientWidth/2-i.width/2);t.targetTop=r,t.targetLeft=n}),120)}}const re="is-dragging";class ne extends Ht{constructor(t){super(t),this._dragger=void 0,this._componentEvents=[],this._currentLerp=!1}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{enabled:!0,speed:1,lerp:!1,reverseDir:!1,stopPropagation:!1})}get isDragging(){return!!this._dragger&&this._dragger.isDragging}_constructor(){super._constructor(),this._toggleDragger()}_onPropMutate(){super._onPropMutate(),this._toggleDragger()}_toggleDragger(){this.prop.enabled?this._addDragger():this._removeDragger()}_addDragger(){if(this._dragger)return;const{component:t}=this;this._dragger=new Qt({container:t.outer}),this._dragger.addCallback("start",this._handleDragStart.bind(this)),this._dragger.addCallback("move",(t=>{this._handleDragMove(t)})),this._dragger.addCallback("end",this._handleDragEnd.bind(this)),this._componentEvents.push(t.addCallback("wheel",(()=>{var t;null===(t=this._dragger)||void 0===t||t.cancel()})))}_removeDragger(){this._dragger&&(this._dragger.destroy(),this._dragger=void 0,this._componentEvents.forEach((t=>{t.remove()})),this._componentEvents=[])}_handleDragStart(){const{component:t}=this;if(!t.prop.enabled)return;if(t.maxScrollableWidth<=0&&t.maxScrollableHeight<=0)return;const{lerp:e}=this.prop;"boolean"!=typeof e&&(this._currentLerp=t.prop.render.lerp,t.changeProp({render:{lerp:e}})),this._callbacks.tbt("start",!1)}_handleDragMove(t){const{component:e}=this;if(!e.prop.enabled)return;if(e.maxScrollableWidth<=0&&e.maxScrollableHeight<=0)return;const{evt:s}=t,{stopPropagation:i}=this.prop;if(i){if(!s.cancelable)return;const e=Math.abs(t.coords.x-t.start.x),r=Math.abs(t.coords.y-t.start.y);(e>i.threshold&&"x"===i.dir||r>i.threshold&&"y"===i.dir)&&s.cancelable&&(s.preventDefault(),s.stopPropagation())}const{speed:r,reverseDir:n}=this.prop,o=t.step.x*r,a=t.step.y*r;e.targetLeft-=n?a:o,e.targetTop-=n?o:a,e.outer.classList.add(re),e.container.classList.add(re),this._callbacks.tbt("move",!1)}_handleDragEnd(){const{component:t}=this;t.outer.classList.remove(re),t.container.classList.remove(re),"boolean"!=typeof this._currentLerp&&(t.changeProp({render:{lerp:this._currentLerp}}),this._currentLerp=!1),this._callbacks.tbt("end",!1)}_destroy(){super._destroy(),this._removeDragger()}}class oe extends O{constructor(t,e=!0){super(t,!1),"string"==typeof this.prop.container?this._scrollContainer=m(this.prop.container):this._scrollContainer=this.prop.container,"string"==typeof this.prop.section?this._section=m(this.prop.section):this._section=this.prop.section,this._progress=-.001,this._scopeScroll=[0,0],this._scopeIn=[0,0],this._scopeMove=[0,0],this._scopeOut=[0,0],e&&this.init()}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{container:window,viewportTarget:"",resizeTimeout:0})}get scrollContainer(){return this._scrollContainer}get section(){return this._section}get scopeScroll(){return this._scopeScroll}get scopeIn(){return this._scopeIn}get scopeMove(){return this._scopeMove}get scopeOut(){return this._scopeOut}get progress(){return this._progress}set progress(t){this._progress=t}init(){super.init()}_setEvents(){super._setEvents(),this.addViewportCallback(this.prop.viewportTarget,(()=>{this.resize()}),{timeout:this.prop.resizeTimeout}),this._loadedEvent=this._app.onPageLoaded(),this._loadedEvent.then((()=>{this.resize()})).catch((()=>{})),this._scrollEvent=z({container:this.prop.container,callback:this._handleScroll.bind(this)})}_onPropMutate(){super._onPropMutate(),this.resize()}get progressIn(){return H(this.progress,this.scopeIn)||0}get progressOut(){return H(this.progress,this.scopeOut)||0}get progressMove(){return H(this.progress,this.scopeMove)||0}_handleScroll(){const t=J(this.scrollContainer);t&&this._render(t)}resize(){const t=J(this.scrollContainer);if(!t)return;const e=this.section.getBoundingClientRect(),s=this._app.viewport.height,i=t.scrollTop+e.top-s,r=t.scrollTop+e.top+e.height,n=r-i;this._scopeScroll=[i,r],this._scopeIn=[0,s/n],this._scopeOut=[1-s/n,1],this._scopeMove=[this._scopeIn[1],this._scopeOut[0]],this.callbacks.tbt("resize",!1),this._render(t,!0)}_render(t,e=!1){this._canRender(t,e)&&this.callbacks.tbt("render",!1)}_canRender(t,e=!1){if(!t)return!1;const{scrollTop:s}=t,i=this.progress,r=H(s,[this._scopeScroll[0],this._scopeScroll[1]])||0;return this.progress=r,e||r!==i}_destroy(){var t,e;super._destroy(),null===(t=this._scrollEvent)||void 0===t||t.remove(),null===(e=this._loadedEvent)||void 0===e||e.cancel()}}class ae extends O{constructor(t,e=!0){if(super(t,!1),this.prop.container){const t=m(this.prop.container);t instanceof HTMLElement&&(this._container=t)}this._container.translate=!1,this._container&&this._container.classList.add(this.prefix),this._initHTML=this._container.innerHTML;const s=this._container[this.prop.textSource].trim();this._initText=s||"no rendered text",this._initText=this._initText.replace(/\s+\n/gm,"\n"),this._initText=this._initText.replace(/<br>/gm,String.fromCharCode(10)),this._initText=this._initText.replace(/<br\/>/gm,String.fromCharCode(10)),this._initText=this._initText.replace(/<br \/>/gm,String.fromCharCode(10)),this._container.ariaLabel=this._initText,this._isPrimarySplit=!1,this._letters=[],this._words=[],this._lines=[],e&&this.init()}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{container:`#${this.prefix}`,textSource:"innerText",appendLetters:!0,appendLines:!1,viewportTarget:"",resizeTimeout:0})}get prefix(){return`${this._app.prefix}split-text`}get container(){return this._container}get letters(){return this._letters}get words(){return this._words}get lines(){return this._lines}_setEvents(){super._setEvents(),this.splitText(),this.prop.appendLines&&this.addViewportCallback(this.prop.viewportTarget,(()=>{this.splitText()}),{timeout:this.prop.resizeTimeout})}splitText(){this._isPrimarySplit||(this.container.innerHTML="",this._splitIntoWords(),this._splitIntoLetters(),this._appendWords(),this._isPrimarySplit=!0),this.prop.appendLines&&this._splitIntoLines(),this.callbacks.tbt("split",!1)}_splitIntoWords(){const t=this._initText.split("");let e,s=0;t.forEach((t=>{const e=this._words[s]||{content:"",hasNewLine:!1,el:x("span",{class:`${this.prefix}__word`,attr:[["aria-hidden","true"]]}),letters:[]};e.el.style.display="inline-block",this._words[s]=e;const i=t.charCodeAt(0),r=32===i||160===i,n=[45,8208,8211,8212,8722].includes(i),o=10===i;r&&(e.whitespace=document.createTextNode(" ")),o&&(e.br=x("br")),e.hasNewLine=o,r||o?s+=1:(e.content+=t,this.prop.appendLetters||(e.el.innerHTML=e.content),n&&(s+=1))})),this._words=this._words.filter(((t,e)=>0!==t.content.length||(e>0&&(this._words[e-1].whitespace=t.whitespace,this._words[e-1].br=t.br),!1))),this._words.forEach((t=>{e&&e.whitespace&&t.el.classList.add("pre-whitespace"),t.whitespace&&t.el.classList.add("has-whitespace"),e=t}))}_appendWords(){this._words.forEach((t=>{this.container.appendChild(t.el),t.whitespace&&this.container.appendChild(t.whitespace),t.br&&this.container.appendChild(t.br)}))}_removeWords(){this._words.forEach((t=>{t.el.remove(),t.whitespace&&t.whitespace.remove(),t.br&&t.br.remove()}))}_splitIntoLetters(){this.prop.appendLetters&&(this._words.forEach((t=>{const e=t.content.split(""),s=[];e.forEach((e=>{const i={el:x("span",{class:`${this.prefix}__letter`,html:e,attr:[["aria-hidden","true"]]}),content:e,word:t};i.el.style.display="inline-block",this._letters.push(i),s.push(i)})),t.letters=s})),this._letters.forEach((t=>{t.word.el.appendChild(t.el)})))}_splitIntoLines(){this._removeLines();let t=!1,e=1/0,s=!1;this.words.forEach((i=>{let r=!1;const n=i.el.offsetTop;r=!(!s||!s.br)||n!==e,s=i,e=n,r&&(t={el:x("span",{class:`${this.prefix}__line`,attr:[["aria-hidden","true"]]}),content:"",words:[]},t.el.style.display="block",this._lines.push(t)),t&&t.words.push(i)})),this._lines.forEach((t=>{t.content=t.words.map((t=>t.content)).join(" ")})),this._lines.forEach((t=>{t.words.forEach((e=>{t.el.appendChild(e.el),e.br&&e.br.remove(),e.whitespace&&t.el.appendChild(e.whitespace)})),this.container.appendChild(t.el)}))}_removeLines(){this._lines.forEach((t=>{t.el.remove()})),this._lines=[],this._appendWords()}_destroy(){super._destroy(),this._lines=[],this._words=[],this._letters=[],this._container.innerHTML=this._initHTML}}class he extends O{constructor(t,e=!0){super(t,!1);const s=m(this.prop.container);if(!s)throw new Error(`No cursor container for ${this.prop.container}`);this._container=s,this._containerIsWindow=s instanceof Window,this._coords={x:0,y:0,w:0,h:0},this._targetCoords={x:0,y:0,w:0,h:0},this._currentFPS=60,this._canPlay=this.prop.run,e&&this.init()}_getDefaultProp(){return Object.assign(Object.assign({},super._getDefaultProp()),{container:window,run:!0,hideNativeCursor:!1,size:{width:50,height:50},render:{lerp:.2,lerpToFixed:2,normalizeLerp:!1},hover:{sticky:!1,autoSize:!1},autoStop:!0})}get prefix(){return`${this._app.prefix}custom-cursor`}get container(){return this._container}get eventsContainer(){return this._container}get domContainer(){return this.container instanceof Window?this._app.html:this.container}get outerCursor(){return this._outerCursor}get innerCursor(){return this._innerCursor}get hoveredEl(){return this._hoveredEl}set hoveredEl(t){this._hoveredEl=t}get coords(){return this._coords}get targetCoords(){var t,e,s;const{hoveredEl:i,prop:r}=this,n=r.size;let{x:o}=this._targetCoords,{y:a}=this._targetCoords,h=n.width,l=n.height,c=0;if(i){const n=i.el.getBoundingClientRect();r.hover.sticky&&(o=n.left+n.width/2,a=n.top+n.height/2),r.hover.autoSize&&(h=(null===(t=this.hoveredEl)||void 0===t?void 0:t.width)||n.width,l=(null===(e=this.hoveredEl)||void 0===e?void 0:e.height)||n.height,c=(null===(s=this.hoveredEl)||void 0===s?void 0:s.padding)||0)}return h+=2*c,l+=2*c,{x:o,y:a,w:h,h:l}}_constructor(){super._constructor(),this._createCursor()}_setEvents(){super._setEvents();const{domContainer:t}=this;this._animationFrame=new M,this._animationFrame.addCallback("frame",(t=>{this._currentFPS=t.realFPS,this.render()})),this._canPlay&&this.enable(),this.addEventListeners(t,"mouseenter",this._handleMouseEnter.bind(this)),this.addEventListeners(t,"mouseleave",this._handleMouseLeave.bind(this)),this.addEventListeners(t,"mousemove",this._handleMouseMove.bind(this)),this.addEventListeners(t,"mousedown",this._handleMouseDown.bind(this)),this.addEventListeners(t,"mouseup",this._handleMouseUp.bind(this)),this.addEventListeners(window,"blur",this._handleWindowBlur.bind(this))}addHoverEl(t,e=100){const{el:s}=t;let i;const r=b(s,"mouseenter",(()=>{i=_((()=>{this.hoveredEl=Object.assign({},t)}),e)})),n=b(s,"mouseleave",(()=>{this.hoveredEl=void 0,i&&i.clear()}));return{remove:()=>{var t;(null===(t=this.hoveredEl)||void 0===t?void 0:t.el)===s&&(this.hoveredEl=void 0),r.remove(),n.remove(),null==i||i.clear()}}}_createCursor(){const{prefix:t,container:e,domContainer:s}=this;this.prop.hideNativeCursor&&(s.style.cursor="none",s.classList.add("hide-defaut-cursor")),s.classList.add(`${t}-container`),this._outerCursor=x("div",{class:`${t} ${e instanceof Window?"in-window":"in-element"} disabled`,parent:s}),this._innerCursor=x("div",{class:`${t}__inner disabled`,parent:this._outerCursor}),this.callbacks.tbt("create",{outerCursor:this.outerCursor,innerCursor:this.innerCursor})}_destroyCursor(){const{prefix:t,domContainer:e}=this;e.style.cursor="",e.classList.remove("hide-defaut-cursor"),e.classList.remove(`${t}-container`),this._outerCursor.remove(),this._innerCursor.remove()}_handleMouseEnter(t){this._coords.x=t.clientX,this._coords.y=t.clientY,this._targetCoords.x=t.clientX,this._targetCoords.y=t.clientY,this.outerCursor.classList.add("in-action")}_handleMouseLeave(){this.outerCursor.classList.remove("in-action")}_handleMouseMove(t){this._targetCoords.x=t.clientX,this._targetCoords.y=t.clientY,this.outerCursor.classList.add("in-action"),this._canPlay&&this._animationFrame.play()}_handleMouseDown(t){1===t.which&&(this.outerCursor.classList.add("click"),this.innerCursor.classList.add("click"))}_handleMouseUp(){this.outerCursor.classList.remove("click"),this.innerCursor.classList.remove("click")}_handleWindowBlur(){this._handleMouseUp()}render(){const{prop:t,targetCoords:e}=this;this._calcCoords();const s=this._renderElements();t.autoStop&&this.coords.x===e.x&&this.coords.y===e.y&&this.coords.w===e.w&&this.coords.h===e.h&&this._animationFrame.pause(),this._callbacks.tbt("render",s)}_calcCoords(){this._coords.x=this._lerp(this._coords.x,this.targetCoords.x),this._coords.y=this._lerp(this._coords.y,this.targetCoords.y),this._coords.w=this._lerp(this._coords.w,this.targetCoords.w),this._coords.h=this._lerp(this._coords.h,this.targetCoords.h)}_lerp(t,e){const{normalizeLerp:s,lerp:i,lerpToFixed:r}=this.prop.render;let n=W(t,e,i*(s?60/this._currentFPS:1),.02);if("number"==typeof r){const t=Math.round(Math.abs(r));n=parseFloat(n.toFixed(t))}return n}_renderElements(){const{domContainer:t,outerCursor:e}=this;let{x:s,y:i}=this.coords;const{w:r,h:n}=this.coords;if(!this._containerIsWindow){const e=t.getBoundingClientRect();s-=e.left,i-=e.top}return e.style.transform=`translate(${s}px, ${i}px)`,e.style.setProperty("--cursor-w",`${r}px`),e.style.setProperty("--cursor-h",`${n}px`),{x:s,y:i,w:r,h:n}}enable(){this._canPlay=!0,this.outerCursor.classList.remove("disabled"),this.innerCursor.classList.remove("disabled"),this._animationFrame.play()}disable(){this._canPlay=!1,this.outerCursor.classList.add("disabled"),this.innerCursor.classList.add("disabled"),this._animationFrame.pause()}_destroy(){super._destroy(),this._destroyCursor(),this._animationFrame.destroy()}}const le={common:i,listeners:r,math:n,scroll:o,image:a}}}]);